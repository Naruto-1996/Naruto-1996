<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ubuntu下安装mysql</title>
      <link href="2021/02/02/ubuntu-xia-an-zhuang-mysql/"/>
      <url>2021/02/02/ubuntu-xia-an-zhuang-mysql/</url>
      
        <content type="html"><![CDATA[<h4 id="ubuntu下安装mysql"><a href="#ubuntu下安装mysql" class="headerlink" title="ubuntu下安装mysql"></a>ubuntu下安装mysql</h4><blockquote><p>MySQL 的安装比较简单，只需要简单的几步就可以搞定，但它的一些配置却比较繁琐。下面以 Ubuntu 18.04（其他版本类似）为例，详细介绍 MySQL 数据库的安装和配置。</p></blockquote><h5 id="1、安装mysql"><a href="#1、安装mysql" class="headerlink" title="1、安装mysql"></a>1、安装mysql</h5><p>在 Ubuntu 中，默认只有最新版本的 MySQL 包含在 APT 软件包存储库中。</p><p>要安装它，需要使用 apt 更新服务器上的软件包索引：</p><pre class="line-numbers language-linux"><code class="language-linux">$ sudo apt update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后安装默认的 MySQL 软件包：</p><pre><code>$ sudo apt install mysql-server</code></pre><p>这一步不会进行一些配置相关的提示（例如：设置密码），因为会使 MySQL 的安装不安全，我们将在下一步解决该问题。</p><h5 id="2、配置mysql"><a href="#2、配置mysql" class="headerlink" title="2、配置mysql"></a>2、配置mysql</h5><p>在安装完 MySQL 之后，应该运行一下包含的安全脚本：</p><pre><code>sudo mysql_secure_installation</code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202115006.png"></p><p>重点说一下第一个提示，这会询问我们是否愿意设置验证密码插件，该插件可用于测试 MySQL 密码的强度。</p><h5 id="3、更改用户验证方式"><a href="#3、更改用户验证方式" class="headerlink" title="3、更改用户验证方式"></a>3、更改用户验证方式</h5><p>虽然上面设置了 root 用户的密码，但当通过 MySQL 终端登录时，并不能通过密码进行认证：</p><pre><code>$ mysql -u root -pEnter password:ERROR 1698 (28000): Access denied for user 'root'@'localhost'</code></pre><p>这是因为在 MySQL 5.7 及之后的版本中，root 用户被默认设置为通过 auth_socket 插件（而非密码）认证，其主要原因是出于对数据库的安全性考虑。</p><p>话虽如此，但偶尔也需要外部程序来访问，这时就会很麻烦了。为了使 root 用户能通过密码方式连接 MySQL，先通过终端打开 MySQL 的提示符：</p><pre><code>sudo mysql</code></pre><p>然后通过如下命令，检查 MySQL 中每个用户的认证方式：</p><pre><code>mysql&gt; SELECT user, authentication_string, plugin, host FROM mysql.user;+------------------+-------------------------------------------+-----------------------+-----------+| user             | authentication_string                     | plugin                | host      |+------------------+-------------------------------------------+-----------------------+-----------+| root             |                                           | auth_socket           | localhost || mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost || mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost || debian-sys-maint | *ABA968D18E3A0B6DEB02F9D5FBDA21415A86977B | mysql_native_password | localhost |+------------------+-------------------------------------------+-----------------------+-----------+4 rows in set (0.00 sec)</code></pre><p>显而易见，root 用户的认证方式是 auth_socket。现在运行如下命令，将认证方式更改为密码认证（即：mysql_native_password）：</p><pre><code>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';</code></pre><p>可以看到，已经修改成功了，现在退出数据库：</p><pre><code>mysql&gt; exit</code></pre><p>再来尝试一下，让 root 用户以密码形式登录：</p><pre><code>$ mysql -u root -pEnter password:Welcome to the MySQL monitor.  Commands end with ; or \g.Your MySQL connection id is 7Server version: 5.7.29-0ubuntu0.18.04.1 (Ubuntu)Copyright (c) 2000, 2020, Oracle and/or its affiliates. All rights reserved.Oracle is a registered trademark of Oracle Corporation and/or itsaffiliates. Other names may be trademarks of their respectiveowners.Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.mysql&gt;</code></pre><h5 id="4、配置远程访问"><a href="#4、配置远程访问" class="headerlink" title="4、配置远程访问"></a>4、配置远程访问</h5><p>默认情况下，MySQL 只监听本地主机（localhost）的连接。若要启用远程连接，需要进行以下配置。</p><ol><li>编辑 MySQL 的 mysqld.cnf 配置文件：</li></ol><pre><code>sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</code></pre><p>注释掉下面这行配置并保存退出：</p><pre><code>bind-address          = 127.0.0.1</code></pre><ol start="2"><li>更改 user 表中的 host 项，将“localhost”改称“%”（表示所有用户都可以访问），并给 root 用户授权：</li></ol><pre><code>$ mysql -u root -pmysql&gt; use mysql;mysql&gt;mysql&gt; update user set host = '%' where user = 'root';mysql&gt;mysql&gt; grant all on *.* to root@'%' identified by '123456' with grant option;mysql&gt;mysql&gt; flush privileges;  # 刷新权限mysql&gt;mysql&gt; exit</code></pre><ol start="3"><li>执行如下命令，重启 mysql 服务：</li></ol><pre><code>$ sudo systemctl restart mysql</code></pre><p>现在，就可以远程连接（下图为 Navicat 截图） MySQl 数据库了：</p><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202120829.png"></p>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu下彻底卸载mysql</title>
      <link href="2021/02/02/ubuntu-xia-che-di-xie-zai-mysql/"/>
      <url>2021/02/02/ubuntu-xia-che-di-xie-zai-mysql/</url>
      
        <content type="html"><![CDATA[<h4 id="Ubuntu下彻底卸载mysql"><a href="#Ubuntu下彻底卸载mysql" class="headerlink" title="Ubuntu下彻底卸载mysql"></a>Ubuntu下彻底卸载mysql</h4><blockquote><p>采用sudo apt install mysql-server命令的方式默认安装的是MySQL5.7，MySQL5.7版本最高只适配到Ubuntu17.04，<br>不支持Ubuntu18.04，MySQL8.0可适配到Ubuntu18.04故如果系统使用的Ubuntu18.04，<br>只能安装MySQL8.0，而且加密方式需要选择5.x的加密，因为有兼容性问题，如果你已经执行了上边的命令，安装了MySQL5.7，需要先卸载。</p></blockquote><h5 id="1、首先在系统终端中查看MySQL的依赖项，运行命令：dpkg-list-grep-mysql"><a href="#1、首先在系统终端中查看MySQL的依赖项，运行命令：dpkg-list-grep-mysql" class="headerlink" title="1、首先在系统终端中查看MySQL的依赖项，运行命令：dpkg --list|grep mysql"></a>1、首先在系统终端中查看MySQL的依赖项，运行命令：<code>dpkg --list|grep mysql</code></h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093257.png"></p><h5 id="2、卸载-sudo-apt-get-remove-mysql-common"><a href="#2、卸载-sudo-apt-get-remove-mysql-common" class="headerlink" title="2、卸载 sudo apt-get remove mysql-common"></a>2、卸载 <code>sudo apt-get remove mysql-common</code></h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093512.png"></p><p>卸载 <code>sudo apt-get autoremove --purge mysql-server-5.7</code></p><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093713.png"></p><h4 id="3、清除残留数据，运行命令：dpkg-l-grep-rc-awk-39-print-2-39-sudo-xargs-dpkg-P"><a href="#3、清除残留数据，运行命令：dpkg-l-grep-rc-awk-39-print-2-39-sudo-xargs-dpkg-P" class="headerlink" title="3、清除残留数据，运行命令：dpkg -l|grep ^rc|awk '{print$2}'|sudo xargs dpkg -P"></a>3、清除残留数据，运行命令：<code>dpkg -l|grep ^rc|awk '{print$2}'|sudo xargs dpkg -P</code></h4><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20210202093832.png"></p><h4 id="4、再次查看MySQL的剩余依赖项，运行命令：dpkg-list-grep-mysql"><a href="#4、再次查看MySQL的剩余依赖项，运行命令：dpkg-list-grep-mysql" class="headerlink" title="4、再次查看MySQL的剩余依赖项，运行命令：dpkg --list|grep mysql"></a>4、再次查看MySQL的剩余依赖项，运行命令：<code>dpkg --list|grep mysql</code></h4><blockquote><p> 如果还有依赖项 就继续删除剩余依赖项，比如：sudo apt-get autoremove –purge mysql-apt-config<br> 如果没有那就表示删除干净了</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Ubuntu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建服务器ubuntu系统</title>
      <link href="2020/12/30/da-jian-fu-wu-qi-ubuntu-xi-tong/"/>
      <url>2020/12/30/da-jian-fu-wu-qi-ubuntu-xi-tong/</url>
      
        <content type="html"><![CDATA[<h4 id="购买完服务器后应该做哪些配置"><a href="#购买完服务器后应该做哪些配置" class="headerlink" title="购买完服务器后应该做哪些配置"></a>购买完服务器后应该做哪些配置</h4><h5 id="一-、安装apache"><a href="#一-、安装apache" class="headerlink" title="一 、安装apache"></a>一 、安装apache</h5><pre><code>sudo apt-get install apche2 apche2-doc</code></pre><p>如果你已经安装完了nginx，你需要安装一个这个东西，当你在浏览器地址栏输入服务器公网ip的时候就会出现一个nginx的默认页面 就像这样的</p><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201230160621.png"></p><h5 id="二、安装mysql"><a href="#二、安装mysql" class="headerlink" title="二、安装mysql"></a>二、安装mysql</h5><pre><code>sudo apt-get install mysql-server mysql-client</code></pre><p>在安装mysql的时候可能会提醒设置root账户密码</p><h5 id="三、更改默认python版本："><a href="#三、更改默认python版本：" class="headerlink" title="三、更改默认python版本："></a>三、更改默认python版本：</h5><p>修改软连接</p><p>1、进入到usr/bin目录下</p><pre><code>cd /usr/bin</code></pre><p>2、查看该目录下与python有关的项</p><pre><code>ls -altrh | grep python</code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201230174310.png"></p><p>3、删除软连接并指向新的版本</p><pre><code>sudo rm pythonsudo ln -s python3.6 python</code></pre><p>4、最后结果</p><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201230174848.png"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> 服务器搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android一些常用的背景图</title>
      <link href="2020/12/18/android-yi-xie-chang-yong-de-bei-jing-tu/"/>
      <url>2020/12/18/android-yi-xie-chang-yong-de-bei-jing-tu/</url>
      
        <content type="html"><![CDATA[<h4 id="Android中一些常用的xml背景图"><a href="#Android中一些常用的xml背景图" class="headerlink" title="Android中一些常用的xml背景图"></a>Android中一些常用的xml背景图</h4><h5 id="1、绿色背景-圆角为4dp的xml背景-颜色可自行修改"><a href="#1、绿色背景-圆角为4dp的xml背景-颜色可自行修改" class="headerlink" title="1、绿色背景 圆角为4dp的xml背景(颜色可自行修改)"></a>1、绿色背景 圆角为4dp的xml背景(颜色可自行修改)</h5><p>res/drawable 目录下 common_bg_4_radius_green.xml</p><pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rectangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/绿色<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>4dp<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201218170312.png"></p><h5 id="2、绿色border边框背景"><a href="#2、绿色border边框背景" class="headerlink" title="2、绿色border边框背景"></a>2、绿色border边框背景</h5><pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span><span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>rectangle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stroke</span>  <span class="token attr-name"><span class="token namespace">android:</span>width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>0.6dp<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/绿色<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201218170216.png"></p><h5 id="3、背景为圆形"><a href="#3、背景为圆形" class="headerlink" title="3、背景为圆形"></a>3、背景为圆形</h5><pre class="line-numbers language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>shape</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>  <span class="token attr-name"><span class="token namespace">android:</span>shape</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>oval<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>solid</span> <span class="token attr-name"><span class="token namespace">android:</span>color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/绿色<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>corners</span> <span class="token attr-name"><span class="token namespace">android:</span>radius</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>8.3dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>size</span>    <span class="token attr-name"><span class="token namespace">android:</span>width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>17dp<span class="token punctuation">"</span></span>    <span class="token attr-name"><span class="token namespace">android:</span>height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>17dp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>shape</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201218170648.png"></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 背景图 </tag>
            
            <tag> Drawable </tag>
            
            <tag> xml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android自定义EditText一键清除和密文查看</title>
      <link href="2020/12/18/android-zi-ding-yi-edittext-yi-jian-qing-chu-he-mi-wen-cha-kan/"/>
      <url>2020/12/18/android-zi-ding-yi-edittext-yi-jian-qing-chu-he-mi-wen-cha-kan/</url>
      
        <content type="html"><![CDATA[<h4 id="Android自定义EditText一键清除和密文查看"><a href="#Android自定义EditText一键清除和密文查看" class="headerlink" title="Android自定义EditText一键清除和密文查看"></a>Android自定义EditText一键清除和密文查看</h4><ul><li>先上截屏看一下效果<br><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/S01218-16245606.jpg"></li></ul><h5 id="自定义步骤"><a href="#自定义步骤" class="headerlink" title="自定义步骤"></a>自定义步骤</h5><h5 id="1、首先新建一个类PowerfulEditText-java-我放在了widgets目录中这个目录平时就用来存放一些自定义的类"><a href="#1、首先新建一个类PowerfulEditText-java-我放在了widgets目录中这个目录平时就用来存放一些自定义的类" class="headerlink" title="1、首先新建一个类PowerfulEditText.java 我放在了widgets目录中这个目录平时就用来存放一些自定义的类"></a>1、首先新建一个类PowerfulEditText.java 我放在了widgets目录中这个目录平时就用来存放一些自定义的类</h5><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">//  这个自定义EditText 有两个按钮 一键清空按钮 和 小眼睛查看明文</span><span class="token comment" spellcheck="true">//  isPassword 字段会根据输入框是否是密码框来决定是否会绘制小眼睛 很好用</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PowerfulEditText</span> <span class="token keyword">extends</span> <span class="token class-name">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>widget<span class="token punctuation">.</span>AppCompatEditText</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String TAG <span class="token operator">=</span> <span class="token string">"PowerfulEditText.java"</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_CLEAR_RES <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>delete_edit<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_VISIBLE_RES <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black_open_eyes<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_INVISIBLE_RES <span class="token operator">=</span> R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black_close_eyes<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_STYLE_COLOR <span class="token operator">=</span> Color<span class="token punctuation">.</span>BLUE<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_BUTTON_PADDING <span class="token operator">=</span>    <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>btn_edit_text_padding<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_BUTTON_WIDTH <span class="token operator">=</span>    <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>dimen<span class="token punctuation">.</span>btn_edit_text_width<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_RECT <span class="token operator">=</span> <span class="token string">"rectangle"</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_ROUND_RECT <span class="token operator">=</span> <span class="token string">"roundRect"</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_HALF_RECT <span class="token operator">=</span> <span class="token string">"halfRect"</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String STYLE_ANIMATOR <span class="token operator">=</span> <span class="token string">"animator"</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_ROUND_RADIUS <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> ANIMATOR_TIME <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_FOCUSED_STROKE_WIDTH <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> DEFAULT_UNFOCUSED_STROKE_WIDTH <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//按钮间隔</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mBtnPadding <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//按钮宽度</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mBtnWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//右内边距</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mTextPaddingRight<span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mClearResId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mVisibleResId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mInvisibleResId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> Bitmap mBitmapClear<span class="token punctuation">;</span>  <span class="token keyword">private</span> Bitmap mBitmapVisible<span class="token punctuation">;</span>  <span class="token keyword">private</span> Bitmap mBitmapInvisible<span class="token punctuation">;</span>  <span class="token keyword">private</span> String mBorderStyle <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mStyleColor <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//出现和消失动画</span>  <span class="token keyword">private</span> ValueAnimator mGoneAnimator<span class="token punctuation">;</span>  <span class="token keyword">private</span> ValueAnimator mVisibleAnimator<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//状态值</span>  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isBtnVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// isPassword 字段会根据输入框是否是密码框来决定是否会绘制小眼睛</span>  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isPassword <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isPasswordVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">boolean</span> isAnimatorRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> <span class="token keyword">int</span> mAnimatorProgress <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> ObjectAnimator mAnimator<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//自定义属性动画</span>  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Property<span class="token operator">&lt;</span>PowerfulEditText<span class="token punctuation">,</span> Integer<span class="token operator">></span> BORDER_PROGRESS    <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Property</span><span class="token operator">&lt;</span>PowerfulEditText<span class="token punctuation">,</span> Integer<span class="token operator">></span><span class="token punctuation">(</span>Integer<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token string">"borderProgress"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> Integer <span class="token function">get</span><span class="token punctuation">(</span>PowerfulEditText powerfulEditText<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> powerfulEditText<span class="token punctuation">.</span><span class="token function">getBorderProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>PowerfulEditText powerfulEditText<span class="token punctuation">,</span> Integer value<span class="token punctuation">)</span> <span class="token punctuation">{</span>      powerfulEditText<span class="token punctuation">.</span><span class="token function">setBorderProgress</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">private</span> Paint mPaint<span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token function">PowerfulEditText</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token function">PowerfulEditText</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> AttributeSet attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">init</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token function">PowerfulEditText</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> AttributeSet attrs<span class="token punctuation">,</span> <span class="token keyword">int</span> defStyleAttr<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">,</span> defStyleAttr<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">init</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> attrs<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> AttributeSet attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//抗锯齿和位图滤波</span>    mPaint <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Paint</span><span class="token punctuation">(</span>Paint<span class="token punctuation">.</span>ANTI_ALIAS_FLAG <span class="token operator">|</span> Paint<span class="token punctuation">.</span>FILTER_BITMAP_FLAG<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//读取xml文件中的配置</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>attrs <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>      TypedArray array <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">obtainStyledAttributes</span><span class="token punctuation">(</span>attrs<span class="token punctuation">,</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> array<span class="token punctuation">.</span><span class="token function">getIndexCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">int</span> attr <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getIndex</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">switch</span> <span class="token punctuation">(</span>attr<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_clearDrawable<span class="token operator">:</span>            mClearResId <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_CLEAR_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_visibleDrawable<span class="token operator">:</span>            mVisibleResId <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_VISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_invisibleDrawable<span class="token operator">:</span>            mInvisibleResId <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getResourceId</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_INVISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_BtnWidth<span class="token operator">:</span>            mBtnWidth <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_BUTTON_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_BtnSpacing<span class="token operator">:</span>            mBtnPadding <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getDimensionPixelSize</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_BUTTON_PADDING<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_borderStyle<span class="token operator">:</span>            mBorderStyle <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span>attr<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>          <span class="token keyword">case</span> R<span class="token punctuation">.</span>styleable<span class="token punctuation">.</span>PowerfulEditText_styleColor<span class="token operator">:</span>            mStyleColor <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span>attr<span class="token punctuation">,</span> DEFAULT_STYLE_COLOR<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      array<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//初始化按钮显示的Bitmap</span>    mBitmapClear <span class="token operator">=</span> <span class="token function">createBitmap</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mClearResId<span class="token punctuation">,</span> DEFAULT_CLEAR_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>    mBitmapVisible <span class="token operator">=</span> <span class="token function">createBitmap</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mVisibleResId<span class="token punctuation">,</span> DEFAULT_VISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>    mBitmapInvisible <span class="token operator">=</span> <span class="token function">createBitmap</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> mInvisibleResId<span class="token punctuation">,</span> DEFAULT_INVISIBLE_RES<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//如果自定义，则使用自定义的值，否则使用默认值</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>mBtnPadding <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      mBtnPadding <span class="token operator">=</span> DEFAULT_BUTTON_PADDING<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>mBtnWidth <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      mBtnWidth <span class="token operator">=</span> DEFAULT_BUTTON_WIDTH<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//给文字设置一个padding，避免文字和按钮重叠了</span>    mTextPaddingRight <span class="token operator">=</span> mBtnPadding <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> mBtnWidth <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//按钮出现和消失的动画</span>    mGoneAnimator <span class="token operator">=</span> ValueAnimator<span class="token punctuation">.</span><span class="token function">ofFloat</span><span class="token punctuation">(</span><span class="token number">1f</span><span class="token punctuation">,</span> <span class="token number">0f</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>ANIMATOR_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>    mVisibleAnimator <span class="token operator">=</span> ValueAnimator<span class="token punctuation">.</span><span class="token function">ofFloat</span><span class="token punctuation">(</span><span class="token number">0f</span><span class="token punctuation">,</span> <span class="token number">1f</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>ANIMATOR_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//是否是密码样式</span>    isPassword <span class="token operator">=</span>      <span class="token function">getInputType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>TYPE_TEXT_VARIATION_PASSWORD <span class="token operator">|</span> InputType<span class="token punctuation">.</span>TYPE_CLASS_TEXT<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onMeasure</span><span class="token punctuation">(</span><span class="token keyword">int</span> widthMeasureSpec<span class="token punctuation">,</span> <span class="token keyword">int</span> heightMeasureSpec<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onMeasure</span><span class="token punctuation">(</span>widthMeasureSpec<span class="token punctuation">,</span> heightMeasureSpec<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//设置右内边距, 防止清除按钮和文字重叠</span>    <span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token function">getPaddingLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getPaddingTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mTextPaddingRight<span class="token punctuation">,</span> <span class="token function">getPaddingBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onDraw</span><span class="token punctuation">(</span>Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDraw</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>    mPaint<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Paint<span class="token punctuation">.</span>Style<span class="token punctuation">.</span>STROKE<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//使用自定义颜色。如未定义，则使用默认颜色</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>mStyleColor <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      mPaint<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>mStyleColor<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      mPaint<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>DEFAULT_STYLE_COLOR<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//控件获取焦点时，加粗边框</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      mPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span>DEFAULT_FOCUSED_STROKE_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      mPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span>DEFAULT_UNFOCUSED_STROKE_WIDTH<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//绘制边框</span>    <span class="token function">drawBorder</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//绘制清空和明文显示按钮</span>    <span class="token function">drawButtons</span><span class="token punctuation">(</span>canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawBorder</span><span class="token punctuation">(</span>Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">switch</span> <span class="token punctuation">(</span>mBorderStyle<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//矩形样式</span>      <span class="token keyword">case</span> STYLE_RECT<span class="token operator">:</span>        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span><span class="token function">drawRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//圆角矩形样式</span>      <span class="token keyword">case</span> STYLE_ROUND_RECT<span class="token operator">:</span>        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">float</span> roundRectLineWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          roundRectLineWidth <span class="token operator">=</span> DEFAULT_FOCUSED_STROKE_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          roundRectLineWidth <span class="token operator">=</span> DEFAULT_UNFOCUSED_STROKE_WIDTH <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        mPaint<span class="token punctuation">.</span><span class="token function">setStrokeWidth</span><span class="token punctuation">(</span>roundRectLineWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Build<span class="token punctuation">.</span>VERSION<span class="token punctuation">.</span>SDK_INT <span class="token operator">>=</span> <span class="token number">21</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          canvas<span class="token punctuation">.</span><span class="token function">drawRoundRect</span><span class="token punctuation">(</span>            roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> width <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>            DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span> DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span>            mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          canvas<span class="token punctuation">.</span><span class="token function">drawRoundRect</span><span class="token punctuation">(</span>            <span class="token keyword">new</span> <span class="token class-name">RectF</span><span class="token punctuation">(</span>roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> width <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">-</span> roundRectLineWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span> DEFAULT_ROUND_RADIUS<span class="token punctuation">,</span>            mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//半矩形样式</span>      <span class="token keyword">case</span> STYLE_HALF_RECT<span class="token operator">:</span>        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//动画特效样式</span>      <span class="token keyword">case</span> STYLE_ANIMATOR<span class="token operator">:</span>        <span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isAnimatorRunning<span class="token punctuation">)</span> <span class="token punctuation">{</span>          canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span>width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> mAnimatorProgress<span class="token punctuation">,</span> height<span class="token punctuation">,</span> width <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">+</span> mAnimatorProgress<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>mAnimatorProgress <span class="token operator">==</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            isAnimatorRunning <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          canvas<span class="token punctuation">.</span><span class="token function">drawLine</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawButtons</span><span class="token punctuation">(</span>Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//播放按钮出现的动画</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>mVisibleAnimator<span class="token punctuation">.</span><span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">float</span> scale <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span> mVisibleAnimator<span class="token punctuation">.</span><span class="token function">getAnimatedValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">drawClearButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> isPasswordVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//绘制静态的按钮</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token function">drawClearButton</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> isPasswordVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">//播放按钮消失的动画</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>mGoneAnimator<span class="token punctuation">.</span><span class="token function">isRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">float</span> scale <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span> mGoneAnimator<span class="token punctuation">.</span><span class="token function">getAnimatedValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">drawClearButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPassword<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> canvas<span class="token punctuation">,</span> isPasswordVisible<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawClearButton</span><span class="token punctuation">(</span><span class="token keyword">float</span> scale<span class="token punctuation">,</span> Canvas canvas<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> right <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span>scale <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> bottom <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>top <span class="token operator">+</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>    Rect rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>    canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>mBitmapClear<span class="token punctuation">,</span> null<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">drawVisibleButton</span><span class="token punctuation">(</span><span class="token keyword">float</span> scale<span class="token punctuation">,</span> Canvas canvas<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> right <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> left <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getScrollX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token punctuation">(</span>scale <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">-</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> top <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> bottom <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>top <span class="token operator">+</span> mBtnWidth <span class="token operator">*</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>    Rect rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rect</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> top<span class="token punctuation">,</span> right<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>      canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>mBitmapVisible<span class="token punctuation">,</span> null<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      canvas<span class="token punctuation">.</span><span class="token function">drawBitmap</span><span class="token punctuation">(</span>mBitmapInvisible<span class="token punctuation">,</span> null<span class="token punctuation">,</span> rect<span class="token punctuation">,</span> mPaint<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 清除按钮出现时的动画效果</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startVisibleAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">endAllAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mVisibleAnimator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 清除按钮消失时的动画效果</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startGoneAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">endAllAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mGoneAnimator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 结束所有动画</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">endAllAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    mGoneAnimator<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mVisibleAnimator<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onFocusChanged</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> focused<span class="token punctuation">,</span> <span class="token keyword">int</span> direction<span class="token punctuation">,</span> Rect previouslyFocusedRect<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onFocusChanged</span><span class="token punctuation">(</span>focused<span class="token punctuation">,</span> direction<span class="token punctuation">,</span> previouslyFocusedRect<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//播放按钮出现和消失动画</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>focused <span class="token operator">&amp;&amp;</span> <span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>        isBtnVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token function">startVisibleAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>        isBtnVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token function">startGoneAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//实现动画特效样式</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>focused <span class="token operator">&amp;&amp;</span> mBorderStyle<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>STYLE_ANIMATOR<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      isAnimatorRunning <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      mAnimator <span class="token operator">=</span> ObjectAnimator<span class="token punctuation">.</span><span class="token function">ofInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> BORDER_PROGRESS<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      mAnimator<span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>ANIMATOR_TIME<span class="token punctuation">)</span><span class="token punctuation">;</span>      mAnimator<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">setBorderProgress</span><span class="token punctuation">(</span><span class="token keyword">int</span> borderProgress<span class="token punctuation">)</span> <span class="token punctuation">{</span>    mAnimatorProgress <span class="token operator">=</span> borderProgress<span class="token punctuation">;</span>    <span class="token function">postInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">protected</span> <span class="token keyword">int</span> <span class="token function">getBorderProgress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> mAnimatorProgress<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onTextChanged</span><span class="token punctuation">(</span>CharSequence text<span class="token punctuation">,</span> <span class="token keyword">int</span> start<span class="token punctuation">,</span> <span class="token keyword">int</span> lengthBefore<span class="token punctuation">,</span> <span class="token keyword">int</span> lengthAfter<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onTextChanged</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> start<span class="token punctuation">,</span> lengthBefore<span class="token punctuation">,</span> lengthAfter<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>        isBtnVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token function">startVisibleAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>isBtnVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>        isBtnVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token function">startGoneAnimator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">onTouchEvent</span><span class="token punctuation">(</span>MotionEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> MotionEvent<span class="token punctuation">.</span>ACTION_UP<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">boolean</span> clearTouched <span class="token operator">=</span>        <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">-</span> mBtnWidth <span class="token operator">&lt;</span> event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding<span class="token punctuation">)</span>          <span class="token operator">&amp;&amp;</span> <span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">boolean</span> visibleTouched <span class="token operator">=</span>        <span class="token punctuation">(</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">&lt;</span> event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mBtnPadding <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">-</span> mBtnWidth<span class="token punctuation">)</span>          <span class="token operator">&amp;&amp;</span> isPassword <span class="token operator">&amp;&amp;</span> <span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>clearTouched<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">setError</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>visibleTouched<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isPasswordVisible<span class="token punctuation">)</span> <span class="token punctuation">{</span>          isPasswordVisible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>          <span class="token function">setInputType</span><span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>TYPE_TEXT_VARIATION_PASSWORD <span class="token operator">|</span> InputType<span class="token punctuation">.</span>TYPE_CLASS_TEXT<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token function">setSelection</span><span class="token punctuation">(</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          isPasswordVisible <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>          <span class="token function">setInputType</span><span class="token punctuation">(</span>InputType<span class="token punctuation">.</span>TYPE_TEXT_VARIATION_VISIBLE_PASSWORD<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token function">setSelection</span><span class="token punctuation">(</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onTouchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 开始晃动的入口</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">startShakeAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">setAnimation</span><span class="token punctuation">(</span><span class="token function">shakeAnimation</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">startAnimation</span><span class="token punctuation">(</span><span class="token function">getAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">/**   * 晃动动画   *   * @param counts 0.5秒钟晃动多少下   * @return   */</span>  <span class="token keyword">private</span> Animation <span class="token function">shakeAnimation</span><span class="token punctuation">(</span><span class="token keyword">int</span> counts<span class="token punctuation">)</span> <span class="token punctuation">{</span>    Animation translateAnimation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TranslateAnimation</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    translateAnimation<span class="token punctuation">.</span><span class="token function">setInterpolator</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CycleInterpolator</span><span class="token punctuation">(</span>counts<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    translateAnimation<span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> translateAnimation<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> Bitmap <span class="token function">createBitmap</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> <span class="token keyword">int</span> resId<span class="token punctuation">,</span> <span class="token keyword">int</span> defResId<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>resId <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> resId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> defResId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个类里面会用到values目录中的attrs.xml 和 dimens.xml 如果没有就自行创建</p><h5 id="2、往attrs-xml中写入自定义EditText的属性"><a href="#2、往attrs-xml中写入自定义EditText的属性" class="headerlink" title="2、往attrs.xml中写入自定义EditText的属性"></a>2、往attrs.xml中写入自定义EditText的属性</h5><pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span> <span class="token comment" spellcheck="true">&lt;!--  自定义EditText的属性--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>declare-styleable</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>PowerfulEditText<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment" spellcheck="true">&lt;!--图片资源--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>clearDrawable<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>visibleDrawable<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>invisibleDrawable<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>reference<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--按钮宽度大小--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>BtnWidth<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dimension<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--按钮间距大小--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>BtnSpacing<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dimension<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token comment" spellcheck="true">&lt;!--边框颜色和样式--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>styleColor<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>color<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attr</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>borderStyle<span class="token punctuation">"</span></span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>string<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>declare-styleable</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="3、往dimens-xml中写入一些大小配置"><a href="#3、往dimens-xml中写入一些大小配置" class="headerlink" title="3、往dimens.xml中写入一些大小配置"></a>3、往dimens.xml中写入一些大小配置</h5><pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!-- Default screen margins, per the Android Design guidelines. 自定义editText的属性设置 --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>activity_horizontal_margin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>16dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>activity_vertical_margin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>16dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--按钮间距大小--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn_edit_text_padding<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>8dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span>  <span class="token comment" spellcheck="true">&lt;!--按钮宽度大小--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dimen</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn_edit_text_width<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>16dp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dimen</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="4、在布局文件中使用"><a href="#4、在布局文件中使用" class="headerlink" title="4、在布局文件中使用"></a>4、在布局文件中使用</h5><pre class="line-numbers language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.你的包名.widgets.PowerfulEditText</span>          <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/password_edit<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>45dp<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@null<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>paddingStart</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>12dp<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>textSize</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>15sp<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>hint</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>请输入密码<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">app:</span>BtnWidth</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@dimen/btn_edit_text_width<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">app:</span>BtnSpacing</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@dimen/btn_edit_text_padding<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">android:</span>inputType</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>textPassword<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">tools:</span>ignore</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>RtlSymmetry<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>一共是7个样式可以在xml中使用</p><pre><code>app:clearDrawable="@drawable/clear_all"  app:visibleDrawable="@drawable/visible"  app:invisibleDrawable="@drawable/invisible"  app:BtnWidth="@dimen/btn_edittext_width"  app:BtnSpacing="@dimen/btn_edittext_padding"  app:borderStyle="halfRect"  app:styleColor="#ff0000"  </code></pre><p>其中，边框样式的对应规则如下。</p><pre><code>1、矩形样式：         app:borderStyle="rectangle"2、半矩形样式：       app:borderStyle="halfRect"3、圆角矩形样式：     app:borderStyle="roundRect"4、动画特效样式：     app:borderStyle="animator"控件抖动的效果也是利用动画实现的。调用view实例的以下方法即可实现抖动。mPEditText.startShakeAnimation()</code></pre><p>也可以使用依赖的方式去项目中用，不过如果作者不维护, 那你的项目也就需要改动了</p><p>作者的<a href="https://github.com/AndroidWJC/PowerfulEditText">github链接</a></p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EditText </tag>
            
            <tag> 密文 </tag>
            
            <tag> 一键清除 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux(ubuntu) - 使用fail2ban 为nginx保驾护航</title>
      <link href="2020/12/09/linux-ubuntu-shi-yong-fail2ban-wei-nginx-bao-jia-hu-hang/"/>
      <url>2020/12/09/linux-ubuntu-shi-yong-fail2ban-wei-nginx-bao-jia-hu-hang/</url>
      
        <content type="html"><![CDATA[<h4 id="Linux-ubuntu-使用fail2ban-为nginx保驾护航"><a href="#Linux-ubuntu-使用fail2ban-为nginx保驾护航" class="headerlink" title="Linux(ubuntu) - 使用fail2ban 为nginx保驾护航"></a>Linux(ubuntu) - 使用fail2ban 为nginx保驾护航</h4><h4 id="1、安装"><a href="#1、安装" class="headerlink" title="1、安装"></a>1、安装</h4><p>Fail2ban软件包包含在默认的Ubuntu 20.04存储库中。 要安装它，请以root或具有sudo特权的用户身份输入以下命令：</p><pre><code>sudo apt updatesudo apt install fail2ban</code></pre><p>安装完成后，Fail2ban服务将自动启动。 您可以通过检查服务状态来验证它：</p><pre><code>sudo systemctl status fail2ban</code></pre><p>输出将如下所示：</p><pre><code> fail2ban.service - Fail2Ban Service     Loaded: loaded (/lib/systemd/system/fail2ban.service; enabled; vendor preset: enabled)     Active: active (running) since Wed 2020-08-19 06:16:29 UTC; 27s ago       Docs: man:fail2ban(1)   Main PID: 1251 (f2b/server)      Tasks: 5 (limit: 1079)     Memory: 13.8M     CGroup: /system.slice/fail2ban.service             └─1251 /usr/bin/python3 /usr/bin/fail2ban-server -xf start</code></pre><h4 id="2、Fail2ban配置"><a href="#2、Fail2ban配置" class="headerlink" title="2、Fail2ban配置"></a>2、Fail2ban配置</h4><p>默认的<code>Fail2ban</code>安装带有两个配置文件， <code>/etc/fail2ban/jail.conf</code> 和 <code>/etc/fail2ban/jail.d/defaults-debian.conf</code>。 不建议修改这些文件，因为更新软件包时它们可能会被覆盖。</p><p>最好的做法是：</p><pre><code>sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local 或者新建sudo vim /etc/fail2ban/jail.local </code></pre><p>然后修改 jail.local的内容</p><pre><code>[nginx-req-limit]enabled = truefilter = nginx-req-limitaction = iptables-multiport[name=ReqLimit, port="http,https", protocol=tcp]logpath = /var/log/nginx/access.logfindtime = 60maxretry = 600bantime = 600</code></pre><p>新增文件：<code>/etc/fail2ban/filter.d/nginx-req-limit.conf</code></p><pre><code># Fail2Ban configuration file## supports: ngx_http_limit_req_module module[Definition]failregex =  -.*- .*HTTP/1.* .* .*$# Option: ignoreregex# Notes.: regex to ignore. If this regex matches, the line is ignored.# Values: TEXT#ignoreregex =</code></pre><h4 id="将IP地址列入白名单"><a href="#将IP地址列入白名单" class="headerlink" title="将IP地址列入白名单"></a>将IP地址列入白名单</h4><p>您可以将要排除在外的IP地址，IP范围或主机添加到 <code>ignoreip</code> 指示。 在这里，您应该添加您的本地PC IP地址和所有其他要列入白名单的计算机。</p><p><code>/etc/fail2ban/jail.local</code></p><pre><code>ignoreip = 127.0.0.1/8 ::1 123.123.123.123 192.168.1.0/24</code></pre><ul><li>每次编辑配置文件时，都需要重新启动Fail2ban服务以使更改生效：</li></ul><pre><code>sudo systemctl restart fail2ban</code></pre><h4 id="Fail2ban客户端-命令"><a href="#Fail2ban客户端-命令" class="headerlink" title="Fail2ban客户端 命令"></a>Fail2ban客户端 命令</h4><ul><li>检查监狱状态：</li></ul><p><code>sudo fail2ban-client status sshd</code></p><ul><li>解禁IP：</li></ul><p><code>sudo fail2ban-client set sshd unbanip 23.34.45.56</code></p><ul><li>禁止IP</li></ul><p><code>sudo fail2ban-client set sshd banip 23.34.45.56</code></p>]]></content>
      
      
      <categories>
          
          <category> Fail2ban </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给Linux安装nginx</title>
      <link href="2020/12/09/gei-linux-an-zhuang-nginx/"/>
      <url>2020/12/09/gei-linux-an-zhuang-nginx/</url>
      
        <content type="html"><![CDATA[<h4 id="给Linux-ubuntu-服务器安装nginx"><a href="#给Linux-ubuntu-服务器安装nginx" class="headerlink" title="给Linux(ubuntu)服务器安装nginx"></a>给Linux(ubuntu)服务器安装nginx</h4><h5 id="1：检查80端口是否被占用。"><a href="#1：检查80端口是否被占用。" class="headerlink" title="1：检查80端口是否被占用。"></a>1：检查80端口是否被占用。</h5><h5 id="2：安装nginx"><a href="#2：安装nginx" class="headerlink" title="2：安装nginx"></a>2：安装nginx</h5><p>给nginx配置安装目录,就是nginx存放的目录</p><p>我一般安装软件都是安装在/usr/local下面的</p><pre><code>mkdir /usr/local/nginx</code></pre><p>进入nginx目录<code>cd /usr/local/nginx</code></p><p>使用wget命令下载nginx资源包</p><pre><code>wget http://nginx.org/download/nginx-1.12.2.tar.gz</code></pre><p>解压</p><pre class="line-numbers language-yaml"><code class="language-yaml">tar <span class="token punctuation">-</span>zxvf nginx<span class="token punctuation">-</span>1.5.9.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>执行<code> ./configure命令</code></p><pre><code>cd nginx-1.5.9sudo ./configure</code></pre><p>执行<code>./configure</code>可能会存在一下错误,如果出现请执行一下命令</p><blockquote><p>错误1</p><p>/configure: error: the HTTP rewrite module requires the PCRE library.</p></blockquote><p>解决方法</p><p>安装pcre-devel解决问题</p><pre><code>sudo apt-get updatesudo apt-get install libpcre3 libpcre3-dev</code></pre><blockquote><p>错误2</p><p>./configure: error: the HTTP cache module requires md5 functions<br>from OpenSSL library. You can either disable the module by using<br>–without-http-cache option, or install the OpenSSL library into the system,<br>or build the OpenSSL library statically from the source with nginx by using<br>–with-http_ssl_module –with-openssl=<path> options.</path></p></blockquote><p>解决办法：</p><pre><code>sudo apt-get install openssl libssl-dev</code></pre><blockquote><p>错误3 （如果出现这种检查不通过，则说明缺少某些依赖。）</p><p>ubuntu@VM-0-16-ubuntu:/usr/local/nginx/nginx-1.12.2$ sudo ./configure<br>checking for OS</p><p>Linux 4.15.0-118-generic x86_64<br>checking for C compiler … not found</p><p>./configure: error: C compiler cc is not found</p></blockquote><p>解决办法：</p><pre class="line-numbers language-yaml"><code class="language-yaml">sudo apt<span class="token punctuation">-</span>get install build<span class="token punctuation">-</span>essential<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>错误4</p><p>error: the HTTP gzip module requires the zlib library.</p></blockquote><p>解决办法：</p><pre><code>apt-get install zlib1g-dev</code></pre><p>然后在执行<code> ./configure命令</code></p><pre><code>cd nginx-1.5.9sudo ./configure</code></pre><h5 id="3-编译"><a href="#3-编译" class="headerlink" title="3.编译"></a>3.编译</h5><p><code>make</code> 编译 （make的过程是把各种语言写的源码文件，变成可执行文件和各种库文件）</p><pre><code>cd /usr/local/nginx/nginx-1.5.9sudo make</code></pre><h5 id="4-make-install安装"><a href="#4-make-install安装" class="headerlink" title="4.make install安装"></a>4.make install安装</h5><p><code>make install</code> 安装 （<code>make install</code>是把这些编译出来的可执行文件和库文件复制到合适的地方）</p><pre><code>sudo make install</code></pre><h5 id="5-启动nginx服务"><a href="#5-启动nginx服务" class="headerlink" title="5.启动nginx服务"></a>5.启动nginx服务</h5><pre><code>cd /usr/local/nginx/sbinsudo ./nginx</code></pre><h5 id="6-看nginx服务是否启动"><a href="#6-看nginx服务是否启动" class="headerlink" title="6.看nginx服务是否启动"></a>6.看nginx服务是否启动</h5><pre><code>ubuntu@VM-0-16-ubuntu:/usr/local/nginx/sbin$ ps -ef | grep nginxroot      7183     1  0 14:53 ?        00:00:00 nginx: master process ./nginxnobody    7184  7183  0 14:53 ?        00:00:00 nginx: worker processubuntu    7252 23084  0 14:53 pts/1    00:00:00 grep --color=auto nginx</code></pre><p>我们看到服务已经起来了,输入ip即可访问我们nginx目录下面的html文件夹下面的index.html文件</p><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201209145642.png"></p><p>===================华丽的分割线======================</p><p><code>nginx -s reload </code>：修改配置后重新加载生效</p><p><code>nginx -s reopen</code> ：重新打开日志文件</p><p>关闭nginx：</p><p><code>nginx -s stop</code> :快速停止nginx</p><p><code>quit </code>：完整有序的停止nginx</p>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> linux </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给服务器设置ssh免密码登录</title>
      <link href="2020/12/09/gei-fu-wu-qi-she-zhi-ssh-mian-mi-ma-deng-lu/"/>
      <url>2020/12/09/gei-fu-wu-qi-she-zhi-ssh-mian-mi-ma-deng-lu/</url>
      
        <content type="html"><![CDATA[<h4 id="给服务器设置ssh免密码登录"><a href="#给服务器设置ssh免密码登录" class="headerlink" title="给服务器设置ssh免密码登录"></a>给服务器设置ssh免密码登录</h4><h4 id="SSH是什么？"><a href="#SSH是什么？" class="headerlink" title="SSH是什么？"></a>SSH是什么？</h4><blockquote><p>SSH 为 Secure Shell 的缩写，由IETF的网络工作小组（Network Working Group）所制定；SSH为建立在应用层和传输层基础上的安全协议。<br>SSH是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用SSH协议可以有效防止远程管理过程中的信息泄露问题。<br>SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。<br>几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。</p></blockquote><ul><li>简单来理解，就是我拥有一台服务器，我现在想要登录上去做一些事情，那就得使用ssh登录到远程的服务器上，才能在上面进行操作。</li></ul><h4 id="SSH-服务端以及客户端配置"><a href="#SSH-服务端以及客户端配置" class="headerlink" title="SSH 服务端以及客户端配置"></a>SSH 服务端以及客户端配置</h4><h5 id="启动-sshd-服务"><a href="#启动-sshd-服务" class="headerlink" title="启动 sshd 服务"></a>启动 sshd 服务</h5><blockquote><p>一开始在远程服务器上面，需要查看一下他的sshd服务启动了没有，如果没有启动，任何客户端主机是连接不上来的，一般如果是自己在云厂商处购买了主机，主机启动的时候就会把sshd服务启动起来。但有可能自己在测试环境搭建机器的时候，是没有默认启动的，这时候就需要在测试机器的终端看一下，命令如下</p></blockquote><pre><code>ubuntu@VM-0-16-ubuntu:~$ ps -ef | grep sshdroot      1221     1  0 Dec07 ?        00:00:00 /usr/sbin/sshd -Droot     15649  1221  0 09:21 ?        00:00:00 sshd: ubuntu [priv]ubuntu   15740 15649  0 09:21 ?        00:00:00 sshd: ubuntu@pts/0ubuntu   24863 15741  0 10:24 pts/0    00:00:00 grep --color=auto sshd</code></pre><blockquote><p>这里看到第一行,sshd已经启动起来了,进程号是 1221</p></blockquote><ul><li>如果没有启动的话,那就启动一下,命令如下</li></ul><pre><code>ubuntu@VM-0-16-ubuntu:~$ service sshd start</code></pre><h4 id="登录服务器主机的方式"><a href="#登录服务器主机的方式" class="headerlink" title="登录服务器主机的方式"></a>登录服务器主机的方式</h4><h4 id="1、客户端使用密码的方式登录目标主机"><a href="#1、客户端使用密码的方式登录目标主机" class="headerlink" title="1、客户端使用密码的方式登录目标主机"></a>1、客户端使用密码的方式登录目标主机</h4><pre><code>➜  ~ ssh root@192.168.0.187root@192.168.0.187's password:</code></pre><p>输入密码即可</p><h4 id="2、客户端使用密钥方式登录目标主机-免密码"><a href="#2、客户端使用密钥方式登录目标主机-免密码" class="headerlink" title="2、客户端使用密钥方式登录目标主机(免密码)"></a>2、客户端使用密钥方式登录目标主机(免密码)</h4><blockquote><p>使用场景：</p><p>1、如果某个运维人员临时需要登录一台机器，但是机器的管理员并不想把密码暴露给他，所以会让这个运维人员发一个自己的公钥给自己，帮他添加进去，这个运维人员就可以顺利的登录机器了。在运维做完了自己的事情之后，机器的管理员会把他从公钥列表中删掉，这样一来整个过程，密码没有暴露，运维也在这段时间内登上了机器，很完美。</p><p>2、因为自己懒，不想敲密码,想直接使用自己在电脑上配置的ssh_xxx来登录</p></blockquote><h4 id="使用ssh-keygen生成密匙对"><a href="#使用ssh-keygen生成密匙对" class="headerlink" title="使用ssh-keygen生成密匙对"></a>使用ssh-keygen生成密匙对</h4><pre><code>➜  ~ cd .ssh ➜  .ssh ➜  .ssh ssh-keygen -t rsaGenerating public/private rsa key pair.Enter file in which to save the key (/Users/zhaochao/.ssh/id_rsa): id_rsaEnter passphrase (empty for no passphrase):</code></pre><p>回车以后，询问是否要输入一个密码来保护这个密匙，为了方便起见，我就不输入了，不然每次使用这个密匙文件还要输一遍密码,直接一路回车就ok</p><p>到了这里，可以看到我们已经创建好了密匙对</p><pre><code>➜  .ssh lsid_rsa      id_rsa.pub  known_hosts</code></pre><p>我们可以使用<code>cat</code>命令来获取这个id_rsa.pub</p><pre><code>➜  .ssh cat id_rsa.pub ssh-rsa AAAAB3NDzaC1yc2EAFADAADAQFcPFT++P8rOkltuIGDSle45yEyDXtDGcCVcHmHAa8TH3/1G+cGusuvREewaJWdxS95fopdi7iumedN+bOJsCIyDsskuLJtt9FaT1MlEg8C3DH+VTkVTKadOYtFF0cwSediRadqjhMQqTOq6gH1g6zTkr4eGEIPp5RaPFDLZmeGiOeYvIS+d8eIdpHckO90KWL0T0bOcjifHlle+5ia0tSo4ZP5ekp0CxTlu0McorQIU7C1cjW/Iz5xQHpYFOdkKYImQob0H0bletwGY8K4A48ioEG9bfiBwbhmCrt93SGcp40G4e6KsuqLMe+5JUqqRcOg7TqvmD/FnftFbjDz2VTGJ/WlEJ4P3HXvAR8CdKPc/DJMmTV3oxwlmdgtDLFpqW7BkydkF2wSkO1+QP4p5ua3Ned7VLlNb16JKafBXD59q1yhwtsvhDxcgmk0tL5O3H4KPCHMZ6tePcWF2wPf+K/zLqV5DF2KXjat+PMveQf6NWAP+KK2jlG8AyV2+BBTI4nC5TdRZMXGmnVOvoc/eGbBB0NohoxZbFnjIVmpLUJcXrUXmXPojjauXQ0z37Ve/uOarVCkDTMimL+GZ4HrOx2s7FR1XM0cpw== 123456@qq.com</code></pre><h4 id="将公钥文件放进authorized-keys中"><a href="#将公钥文件放进authorized-keys中" class="headerlink" title="将公钥文件放进authorized_keys中"></a>将公钥文件放进authorized_keys中</h4><p>目标主机上如果没有.ssh文件夹，就自己创建一个，创建好之后,再创建一个authorized_keys文件。如果有的话就不用了。</p><pre><code>root@wzt-dev2-PC:~/.ssh# lltotal 8drwxr-xr-x  2 root root 4096 7月  17 19:49 ./drwx------ 10 root root 4096 7月  17 19:49 ../-rw-r--r--  1 root root    0 7月  17 19:49 authorized_keys</code></pre><pre><code>vim authorized_keys</code></pre><p>将刚才的id_rsa.pub的内容放进去保存一下就可以</p><h4 id="这里需要注意"><a href="#这里需要注意" class="headerlink" title="这里需要注意"></a>这里需要注意</h4><blockquote><p>authorized_keys 文件对权限有哟求，必须是600(-rw——-)或者644<br>.ssh目录 必须是700(drwx——),否则一会儿登录不成功<br>弄完之后检查一下权限，如果不是的话，改成响应的权限就ok了</p></blockquote><h4 id="准备就绪，在客户端上登录目标主机"><a href="#准备就绪，在客户端上登录目标主机" class="headerlink" title="准备就绪，在客户端上登录目标主机"></a>准备就绪，在客户端上登录目标主机</h4><p>在登录之前，要确认一下目标主机是否允许密匙对登录，一般都是打开的，如果没有打开就自己打开</p><blockquote><p>(查看 /etc/ssh/sshd_config 文件内容 中的 PubkeyAuthentication 这一项是否为 yes,如果不是就自己修改成yes之后重启sshd服务 )</p></blockquote><pre><code>wzy@wzt-dev2-PC:~$ cat /etc/ssh/sshd_config# Package generated configuration file# See the sshd_config(5) manpage for details# What ports, IPs and protocols we listen forPort 22# Use these options to restrict which interfaces/protocols sshd will bind to#ListenAddress ::#ListenAddress 0.0.0.0Protocol 2# HostKeys for protocol version 2HostKey /etc/ssh/ssh_host_rsa_keyHostKey /etc/ssh/ssh_host_dsa_keyHostKey /etc/ssh/ssh_host_ecdsa_keyHostKey /etc/ssh/ssh_host_ed25519_key#Privilege Separation is turned on for securityUsePrivilegeSeparation yes# Lifetime and size of ephemeral version 1 server keyKeyRegenerationInterval 3600ServerKeyBits 1024# LoggingSyslogFacility AUTHLogLevel INFO# Authentication:LoginGraceTime 120PermitRootLogin yesStrictModes yesRSAAuthentication yesPubkeyAuthentication yes   &lt;---------------  在这里#AuthorizedKeysFile %h/.ssh/authorized_keys</code></pre><p>到此我们就配置完了。 (不用输入密码就可以登录了)</p><pre><code>➜  ~ ./ssh_my_tencent Welcome to Ubuntu 18.04.4 LTS (GNU/Linux 4.15.0-118-generic x86_64) * Documentation:  https://help.ubuntu.com * Management:     https://landscape.canonical.com * Support:        https://ubuntu.com/advantage  System information as of Wed Dec  9 10:45:26 CST 2020  System load:  0.0               Processes:           89  Usage of /:   5.0% of 49.15GB   Users logged in:     0  Memory usage: 12%               IP address for eth0: 172.21.0.16  Swap usage:   0% * Introducing self-healing high availability clusters in MicroK8s.   Simple, hardened, Kubernetes for production, from RaspberryPi to DC.     https://microk8s.io/high-availability * Canonical Livepatch is available for installation.   - Reduce system reboots and improve kernel security. Activate at:     https://ubuntu.com/livepatchNew release '20.04.1 LTS' available.Run 'do-release-upgrade' to upgrade to it.&lt; Hi, How are you &gt; -----------------        \   ^__^         \  (oo)\_______            (__)\       )\/\                ||----w |                ||     ||Last login: Wed Dec  9 09:21:16 2020 from 124.126.1.181</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> SSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给Linux服务器设置登录提示</title>
      <link href="2020/12/08/gei-linux-fu-wu-qi-she-zhi-deng-lu-ti-shi/"/>
      <url>2020/12/08/gei-linux-fu-wu-qi-she-zhi-deng-lu-ti-shi/</url>
      
        <content type="html"><![CDATA[<h5 id="1、给Linux设置登录提示"><a href="#1、给Linux设置登录提示" class="headerlink" title="1、给Linux设置登录提示"></a>1、给Linux设置登录提示</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201208180823.png"></p><pre><code>sudo vim /etc/motd</code></pre><p>然后把你想要的内用拷贝进去 退出服务器,重新登录就可以看到了</p><pre><code>&lt; Hi, How are you &gt; -----------------        \   ^__^         \  (oo)\_______            (__)\       )\/\                ||----w |                ||     ||  </code></pre><h5 id="2、给Linux设置彩色界面"><a href="#2、给Linux设置彩色界面" class="headerlink" title="2、给Linux设置彩色界面"></a>2、给Linux设置彩色界面</h5><h5 id="查看当前终端支持集中颜色"><a href="#查看当前终端支持集中颜色" class="headerlink" title="查看当前终端支持集中颜色"></a>查看当前终端支持集中颜色</h5><p>使用<code>tput colors</code>命令即可查看当前终端支持几种颜色</p><h5 id="查看当前终端类型"><a href="#查看当前终端类型" class="headerlink" title="查看当前终端类型"></a>查看当前终端类型</h5><p><code>$TERM</code>变量代表当前终端类型，可使用<code>echo $TERM</code>命令查看。</p><h5 id="输出当前支持的颜色"><a href="#输出当前支持的颜色" class="headerlink" title="输出当前支持的颜色"></a>输出当前支持的颜色</h5><p>运行以下命令，若输出了完整的256种颜色，就说明当前终端支持256色：</p><pre><code>(x=`tput op` y=`printf %76s`;for i in {0..256};do o=00$i;echo -e ${o:${#o}-3:3} `tput setaf $i;tput setab $i`${y// /=}$x;done)</code></pre><p>若只有前8种颜色，说明当前配置是8色模式，默认情况下，Ubuntu中的Gnome-Terminal就只开启了8色支持。此时可通过修改<code>~/.bashrc</code>文件将其改为256色，在<code>.bashrc</code>文件最后中加入以下代码即可：</p><pre><code>export TERM=vte-256color</code></pre><p>如果没有<code>.bashrc</code>文件 可以选择<code>sudo vim .bashrc</code> 创建一个 也可以使用<code>sudo cp /etc/skel/.bashrc ./</code> 命令拷贝到home目录下</p><p>最后输入命令source ~/.bashrc，一定要输入，不然配置文件无法生效(虽然source了但是退出登录进来后有没有了颜色)</p><h5 id="解决-bashrc文件每次打开终端都需要source的问题"><a href="#解决-bashrc文件每次打开终端都需要source的问题" class="headerlink" title="解决.bashrc文件每次打开终端都需要source的问题"></a>解决.bashrc文件每次打开终端都需要source的问题</h5><p><code>sudo vim ~/.bash_profile</code>在文件内部输入</p><pre><code># 加载.bashrc文件if test -f .bashrc ; thensource .bashrc fi</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在linux服务器上安装vim</title>
      <link href="2020/12/08/zai-linux-fu-wu-qi-shang-an-zhuang-vim/"/>
      <url>2020/12/08/zai-linux-fu-wu-qi-shang-an-zhuang-vim/</url>
      
        <content type="html"><![CDATA[<h4 id="在Linux服务器上-安装-vim-及-vundle-install-vim-and-vundle"><a href="#在Linux服务器上-安装-vim-及-vundle-install-vim-and-vundle" class="headerlink" title="在Linux服务器上 安装 vim 及 vundle ( install vim and vundle)"></a>在Linux服务器上 安装 vim 及 vundle ( install vim and vundle)</h4><h5 id="1、-直接下载-这个文件-并且解压-成为-home目录下的-vim-即可"><a href="#1、-直接下载-这个文件-并且解压-成为-home目录下的-vim-即可" class="headerlink" title="1、 直接下载 这个文件 ,  并且解压,成为 home目录下的 .vim 即可."></a>1、 直接下载 <a href="http://siwei.me/system/resources/W1siZiIsIjIwMTQvMTAvMjEvMDlfNTdfMDdfODA3X2RvdF92aW1fZm9sZGVyLnppcCJdXQ/dot_vim_folder.zip">这个文件</a> ,  并且解压,成为 home目录下的 .vim 即可.</h5><h5 id="2、-下载-vimrc-保存到-home目录下。"><a href="#2、-下载-vimrc-保存到-home目录下。" class="headerlink" title="2、 下载  .vimrc, 保存到 home目录下。"></a>2、 下载  <a href="http://siwei.me/system/resources/BAhbBlsHOgZmSSIjMjAxNC8wMS8xOS8wNV81MV8zOF82NjVfLnZpbXJjBjoGRVQ/.vimrc">.vimrc</a>, 保存到 home目录下。</h5><p>可以使用scp 命令将下载的压缩包传到Linux服务器上</p><pre><code>scp ~/Downloads/dot_vim_folder.zip ubuntu@85.136.62.11:~</code></pre><p>传上去后进入到Linux服务器home目录 </p><pre><code>unzip dot_vim_folder.zip</code></pre><p>将vimrc文件重命令一下 改为.vimrc</p><pre><code>mv vimrc .vimrc</code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>redis使用心得</title>
      <link href="2020/12/02/redis-shi-yong-xin-de/"/>
      <url>2020/12/02/redis-shi-yong-xin-de/</url>
      
        <content type="html"><![CDATA[<h3 id="Redis-使用"><a href="#Redis-使用" class="headerlink" title="Redis 使用"></a>Redis 使用</h3><h4 id="1、在本地使用"><a href="#1、在本地使用" class="headerlink" title="1、在本地使用"></a>1、在本地使用</h4><p>进入到redis的src目录中</p><pre><code>./redis-cli </code></pre><ul><li>一些常规操作</li></ul><pre><code>LPUSH 是把新的元素从右侧插入到数组中LPUSH fruits apple   # =&gt; ["apple"]   把元素从左边插入到数组中&gt; LPUSH  fruits banana   # =&gt; ["banana", "apple"]  RPUSH 是把新的元素从右侧插入到数组中&gt; LINDEX fruits 0     # =&gt; "banana"&gt; LINDEX fruits 1    # =&gt;  "apple"&gt; LRANGE fruits 0 1  #=&gt; ['banana', 'apple']   ， 注意只有lrange, 没有 rrange. </code></pre><ul><li>获取所有的key</li></ul><pre><code>keys *   这个*号是匹配所有的key 可以拼接 比如 fruits*</code></pre><pre><code>127.0.0.1:6379&gt; keys *1) "fruits"</code></pre><ul><li>查看某个key下的值:</li></ul><pre><code>lrange fruits 0 -1</code></pre><pre><code>127.0.0.1:6379&gt; lrange fruits 0 -11) "def"2) "abc"3) "banana"4) "apple"</code></pre><ul><li>截断 保留trim中参数部分</li></ul><pre><code>ltrim fruits 0 2</code></pre><pre><code>我们看到 这里只保留了0-2剩下的都删除了127.0.0.1:6379&gt; lrange fruits 0 -11) "def"2) "abc"3) "banana"</code></pre>]]></content>
      
      
      <categories>
          
          <category> Redis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux 运维方面的知识</title>
      <link href="2020/12/02/linux-yun-wei-fang-mian-de-zhi-shi/"/>
      <url>2020/12/02/linux-yun-wei-fang-mian-de-zhi-shi/</url>
      
        <content type="html"><![CDATA[<h3 id="Linux-常用命令"><a href="#Linux-常用命令" class="headerlink" title="Linux 常用命令"></a>Linux 常用命令</h3><h5 id="1、怎么看Linux系统版本"><a href="#1、怎么看Linux系统版本" class="headerlink" title="1、怎么看Linux系统版本"></a>1、怎么看Linux系统版本</h5><p>登陆Linux，在终端输入</p><pre class="line-numbers language-Linux"><code class="language-Linux">cat /proc/version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h5 id="2、查看服务器内存使用情况"><a href="#2、查看服务器内存使用情况" class="headerlink" title="2、查看服务器内存使用情况"></a>2、查看服务器内存使用情况</h5><pre class="line-numbers language-linux"><code class="language-linux">free -m<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201202120027.png"></p><h4 id="参数解释："><a href="#参数解释：" class="headerlink" title="参数解释："></a>参数解释：</h4><p>Mem行（单位均为M）：</p><ul><li>total：内存总数</li><li>used：已使用内存数</li><li>free：空闲内存数</li><li>shared：当前废弃不用</li><li>buffers：缓存内存数（Buffer）</li><li>cached：缓存内舒数（Page）</li></ul><p>(-/+ buffers/cache)行：</p><ul><li>（-buffers/cache）: 真正使用的内存数，指的是第一部分的 used - buffers - cached</li><li>（+buffers/cache）: 可用的内存数，指的是第一部分的 free + buffers + cached</li></ul><p>Swap行指交换分区。</p><p>实际上不要看free少就觉得内存不足了，buffers和cached都是可以在使用内存时拿来用的，应该以(-/+ buffers/cache)行的free和used来看。只要没发现swap的使用，就不用太担心，如果swap用了很多，那就要考虑增加物理内存了。</p><h4 id="3、-查看CPU使用情况"><a href="#3、-查看CPU使用情况" class="headerlink" title="3、 查看CPU使用情况"></a>3、 查看CPU使用情况</h4><pre><code>top</code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201202120433.png"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 运维 </tag>
            
            <tag> 防火墙 </tag>
            
            <tag> Linux命令 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rails 连接多个数据库</title>
      <link href="2020/12/01/rails-lian-jie-duo-ge-shu-ju-ku/"/>
      <url>2020/12/01/rails-lian-jie-duo-ge-shu-ju-ku/</url>
      
        <content type="html"><![CDATA[<h4 id="Rails项目中如何连接多个数据库"><a href="#Rails项目中如何连接多个数据库" class="headerlink" title="Rails项目中如何连接多个数据库"></a>Rails项目中如何连接多个数据库</h4><h5 id="1、修改config-database-yml文件"><a href="#1、修改config-database-yml文件" class="headerlink" title="1、修改config/database.yml文件"></a>1、修改config/database.yml文件</h5><pre class="line-numbers language-ruby"><code class="language-ruby">default<span class="token punctuation">:</span> <span class="token operator">&amp;</span>default  adapter<span class="token punctuation">:</span> mysql2  encoding<span class="token punctuation">:</span> utf8  collation<span class="token punctuation">:</span> utf8_general_ci  pool<span class="token punctuation">:</span> <span class="token number">5</span>  host<span class="token punctuation">:</span> localhost  username<span class="token punctuation">:</span> root  password<span class="token punctuation">:</span> <span class="token number">123456</span><span class="token comment" spellcheck="true">#原数据库</span>development<span class="token punctuation">:</span>  <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token operator">*</span>default  database<span class="token punctuation">:</span> cadae<span class="token comment" spellcheck="true">#你想要连接的另一个数据库</span>development_main_database<span class="token punctuation">:</span>  <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token operator">*</span>default  database<span class="token punctuation">:</span> cadae_copytest<span class="token punctuation">:</span>  <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token operator">*</span>default  database<span class="token punctuation">:</span> cadae_testproduction<span class="token punctuation">:</span>  <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token punctuation">:</span> <span class="token operator">*</span>default  url<span class="token punctuation">:</span> <span class="token string">'mysql2://root:666666@localhost:3306/coiex?pool=10&amp;timeout=3000'</span>  pool<span class="token punctuation">:</span> <span class="token number">10</span>  database<span class="token punctuation">:</span> cadae<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="2、新建一个连接类继承-ActiveRecord-Base"><a href="#2、新建一个连接类继承-ActiveRecord-Base" class="headerlink" title="2、新建一个连接类继承 ActiveRecord::Base"></a>2、新建一个连接类继承 ActiveRecord::Base</h5><ul><li>比如放在app/models/ 目录下 就叫做 database_connection.rb</li></ul><pre class="line-numbers language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">DatabaseConnection</span> <span class="token operator">&lt;</span> <span class="token constant">ActiveRecord</span><span class="token punctuation">:</span><span class="token symbol">:Base</span>  <span class="token comment" spellcheck="true">#共用连接池，减少数据库连接的消耗</span>  <span class="token keyword">self</span><span class="token punctuation">.</span>abstract_class <span class="token operator">=</span> <span class="token keyword">true</span>  <span class="token comment" spellcheck="true"># 这里根据rails运行环境不同自动获取运行环境 转换为symbol类型   </span>  <span class="token function">establish_connection</span><span class="token punctuation">(</span><span class="token string">"<span class="token interpolation"><span class="token delimiter tag">#{</span>Rails<span class="token punctuation">.</span>env<span class="token delimiter tag">}</span></span>_main_database"</span><span class="token punctuation">.</span>to_sym<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#或者使用</span>  <span class="token comment" spellcheck="true">#establish_connection(:development_main_database)</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>这里有个小坑 在创建database_connection.rb文件的时候 最好不要创建一个文件夹然后把它放进去 这样可能会找不到这个文件</li></ul><h5 id="3、在需要连接另一个数据库的model中继承咱们写的这个类就行了"><a href="#3、在需要连接另一个数据库的model中继承咱们写的这个类就行了" class="headerlink" title="3、在需要连接另一个数据库的model中继承咱们写的这个类就行了"></a>3、在需要连接另一个数据库的model中继承咱们写的这个类就行了</h5><pre class="line-numbers language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">AccountVerificationResult</span> <span class="token operator">&lt;</span> <span class="token constant">DatabaseConnection</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> rails </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
            <tag> rails </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zsh: permission denied: 解决办法</title>
      <link href="2020/11/18/zsh-permission-denied-jie-jue-ban-fa/"/>
      <url>2020/11/18/zsh-permission-denied-jie-jue-ban-fa/</url>
      
        <content type="html"><![CDATA[<h3 id="1、出现原因"><a href="#1、出现原因" class="headerlink" title="1、出现原因"></a>1、出现原因</h3><pre class="line-numbers language-java"><code class="language-java">用户没有权限，所以才出现了这个错误，所以只需要用chmod修改一下权限<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2、解决办法"><a href="#2、解决办法" class="headerlink" title="2、解决办法"></a>2、解决办法</h3><pre><code>chmod u+x *.sh</code></pre><h3 id="3、说明"><a href="#3、说明" class="headerlink" title="3、说明"></a>3、说明</h3><pre><code>chmod是权限管理命令change the permissions mode of a file的缩写。u代表所有者。x代表执行权限。’+’ 表示增加权限。chmod u+x file.sh 就表示对当前目录下的file.sh文件的所有者增加可执行权限。</code></pre>]]></content>
      
      
      <categories>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zsh </tag>
            
            <tag> chmod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android intent.setFlags方法中参数值的含义</title>
      <link href="2020/10/21/android-intent-setflags-fang-fa-zhong-can-shu-zhi-de-han-yi/"/>
      <url>2020/10/21/android-intent-setflags-fang-fa-zhong-can-shu-zhi-de-han-yi/</url>
      
        <content type="html"><![CDATA[<h4 id="Android中intent-setFlags方法中参数值的含义"><a href="#Android中intent-setFlags方法中参数值的含义" class="headerlink" title="Android中intent.setFlags方法中参数值的含义"></a>Android中intent.setFlags方法中参数值的含义</h4><h5 id="一、FLAG-ACTIVITY-NEW-TASK"><a href="#一、FLAG-ACTIVITY-NEW-TASK" class="headerlink" title="一、FLAG_ACTIVITY_NEW_TASK:"></a>一、FLAG_ACTIVITY_NEW_TASK:</h5><p>例如现在栈一的情况是：A    B   C(C位于栈顶)，C通过intent跳转到D，并且这个Intent添加了FLAG_ACTIVITY_NEW_TASK标记，<br>如果D这个Activity在Manifest.xml中声明了添加Task affinity，系统首先会查找有没有和D的Task affinity相同的task栈存在，<br>如果存在，就将D压入那个栈，如果不存在则会新建一个D的affinity的栈将其压入。如果D的Task affinity默认没有设置，则会将其压入栈1，变成A B C D，<br>这样就和不加FLAG_ACTIVITY_NEW_TASK标记效果是一样的了。但如果试图从非Activity的非正常途径启动一个activity，<br>比如从一个service、BroadcastReceiver等中启动一个Activity，则intent要设置Intent.FLAG_ACTIVITY_NEW_TASK标记。<br>Activity要存在于Activity栈中，而非Activity的途径启动Activity时必然不存在一个Activity的栈，<br>所以要新建一个Activity栈来存放要启动的Activity。</p><h5 id="二、FLAG-ACTIVITY-CLEAR-TOP"><a href="#二、FLAG-ACTIVITY-CLEAR-TOP" class="headerlink" title="二、FLAG_ACTIVITY_CLEAR_TOP:"></a>二、FLAG_ACTIVITY_CLEAR_TOP:</h5><p>例如现在的栈情况为A B C D, D此时通过intent跳转到B，如果这个intent设置FLAG_ACTIVITY_CLEAR_TOP标记，则栈情况变为:A B。如果没有添加这个标记，则栈的情况将会变为：A B C D B 。<br>也就是说，如果设置了FLAG_ACTIVITY_CLEAR_TOP标记，并且目标Activity在栈中已存在，<br>则会把位于该目标Activity之上的Activity从栈中弹出销毁。</p><h5 id="三、FLAG-ACTIVITY-NO-HISTORY"><a href="#三、FLAG-ACTIVITY-NO-HISTORY" class="headerlink" title="三、FLAG_ACTIVITY_NO_HISTORY:"></a>三、FLAG_ACTIVITY_NO_HISTORY:</h5><p>例如现在栈的情况为：A B C 。C通过intent跳转到D，这个intent添加FLAG_ACTIVITY_NO_HISTORY标志，此时界面显示D的内容，但是它并不会压入栈中。<br>如果按返回键，返回到C，栈的情况是：A  B  C。如果D中又跳转到E，栈的情况为：A B C E,此时按返回键会回到C，因为D根本就没有被压入栈中。</p><h5 id="四、FLAG-ACTIVITY-SINGLE-TOP"><a href="#四、FLAG-ACTIVITY-SINGLE-TOP" class="headerlink" title="四、FLAG_ACTIVITY_SINGLE_TOP:"></a>四、FLAG_ACTIVITY_SINGLE_TOP:</h5><p>和Activity的Launch mode的singleTop类似。如果某个intent设置了这个标志，并且这个intent的目标Activity就是栈顶的Activity，那么将不会新建一个实例压入栈中。<br>简言之，目标Activity已在栈顶则跳转过去，不在栈顶则在栈顶新建Activity。</p><ul><li>如果遇到这种错误</li></ul><pre class="line-numbers language-java"><code class="language-java">Caused by<span class="token operator">:</span> android<span class="token punctuation">.</span>util<span class="token punctuation">.</span>AndroidRuntimeException<span class="token operator">:</span> Calling <span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag<span class="token punctuation">.</span> Is <span class="token keyword">this</span> really what you want<span class="token operator">?</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Context中有一个startActivity方法，Activity继承自Context，覆写了startActivity方法。<br>如果使用Activity的startActivity方法，不会有任何问题，而如果使用Context的startActivity方法，<br>就必须新建一个Activity栈，遇到上面的异常，是因为使用了Context的startActivity方法。</p><p>解决的办法是：为intent设置一个flag，即</p><pre class="line-numbers language-java"><code class="language-java">intent<span class="token punctuation">.</span><span class="token function">setFlags</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>FLAG_ACTIVITY_NEW_TASK<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样就可以在新的Activity栈里启动这个Activity了。</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Intent </tag>
            
            <tag> setFlags </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android ImageView设置background和src的区别</title>
      <link href="2020/10/21/android-imageview-she-zhi-background-he-src-de-qu-bie/"/>
      <url>2020/10/21/android-imageview-she-zhi-background-he-src-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<h4 id="一、ImageView设置background和src的区别。"><a href="#一、ImageView设置background和src的区别。" class="headerlink" title="一、ImageView设置background和src的区别。"></a>一、ImageView设置background和src的区别。</h4><ul><li>1.src是图片内容（前景），bg是背景，可以同时使用。</li><li>2.background会根据ImageView组件给定的长宽进行拉伸，而src就存放的是原图的大小，不会进行拉伸 。</li><li>3.scaleType只对src起作用；bg可设置透明度。</li></ul><h4 id="二、ImageView几种不同的设置图片的方式。"><a href="#二、ImageView几种不同的设置图片的方式。" class="headerlink" title="二、ImageView几种不同的设置图片的方式。"></a>二、ImageView几种不同的设置图片的方式。</h4><p>设置background：</p><pre class="line-numbers language-java"><code class="language-java">image<span class="token punctuation">.</span><span class="token function">setBackground</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//变形</span>image<span class="token punctuation">.</span><span class="token function">setBackgroundResource</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//变形 </span>image<span class="token punctuation">.</span><span class="token function">setBackgroundDrawable</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">////变形</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>设置src:</p><pre class="line-numbers language-java"><code class="language-java">image<span class="token punctuation">.</span><span class="token function">setImageDrawable</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>blackk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//不会变形</span>Stringpath <span class="token operator">=</span> Environment<span class="token punctuation">.</span><span class="token function">getExternalStorageDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>File<span class="token punctuation">.</span>separator<span class="token operator">+</span><span class="token string">"test1.jpg"</span><span class="token punctuation">;</span>Bitmap bm <span class="token operator">=</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>image<span class="token punctuation">.</span><span class="token function">setImageBitmap</span><span class="token punctuation">(</span>bm<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不会变形</span>image<span class="token punctuation">.</span><span class="token function">setImageResource</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>blackk<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不会变形</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ImageView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-如何监听前后台</title>
      <link href="2020/10/21/android-ru-he-jian-ting-qian-hou-tai/"/>
      <url>2020/10/21/android-ru-he-jian-ting-qian-hou-tai/</url>
      
        <content type="html"><![CDATA[<h4 id="Android-如何监听前后台"><a href="#Android-如何监听前后台" class="headerlink" title="Android-如何监听前后台"></a>Android-如何监听前后台</h4><p>简单讲讲android如何判断应用切换到后台和应用切换到前台。这个其实很简单，之前需要做一个功能，当app由后台进入前台时需要完成一些逻辑操作，所以在网上查找如何判断app由后台进入前台，最终是解决了问题。这里记录一下。</p><h5 id="一、使用ActivityLifecycleCallbacks简单app进入后台"><a href="#一、使用ActivityLifecycleCallbacks简单app进入后台" class="headerlink" title="一、使用ActivityLifecycleCallbacks简单app进入后台"></a>一、使用ActivityLifecycleCallbacks简单app进入后台</h5><p>有时需要监听到应用在前后台切换并做些处理，一般的做法可能是建立一个BaseActivity，然后全部的Activity都继承它，在BaseActivity的onStart和onStop中计数去处理。这样并不是最好的方式，不做详细介绍，有更好的方式，道理其实差不多，就是借助ActivityLifecycleCallbacks来实现。</p><p>1、 写了一个帮助类</p><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>cadae<span class="token punctuation">.</span>helpers<span class="token punctuation">;</span><span class="token keyword">import</span> android<span class="token punctuation">.</span>app<span class="token punctuation">.</span>Activity<span class="token punctuation">;</span><span class="token keyword">import</span> android<span class="token punctuation">.</span>app<span class="token punctuation">.</span>Application<span class="token punctuation">;</span><span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppFrontBackHelper</span> <span class="token punctuation">{</span>  <span class="token keyword">private</span> OnAppStatusListener mOnAppStatusListener<span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token function">AppFrontBackHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">/**   * 注册状态监听，仅在Application中使用   * @param application   * @param listener   */</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">register</span><span class="token punctuation">(</span>Application application<span class="token punctuation">,</span> OnAppStatusListener listener<span class="token punctuation">)</span><span class="token punctuation">{</span>    mOnAppStatusListener <span class="token operator">=</span> listener<span class="token punctuation">;</span>    application<span class="token punctuation">.</span><span class="token function">registerActivityLifecycleCallbacks</span><span class="token punctuation">(</span>activityLifecycleCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">unRegister</span><span class="token punctuation">(</span>Application application<span class="token punctuation">)</span><span class="token punctuation">{</span>    application<span class="token punctuation">.</span><span class="token function">unregisterActivityLifecycleCallbacks</span><span class="token punctuation">(</span>activityLifecycleCallbacks<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> Application<span class="token punctuation">.</span>ActivityLifecycleCallbacks activityLifecycleCallbacks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application<span class="token punctuation">.</span>ActivityLifecycleCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">//打开的Activity数量统计</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> activityStartCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityCreated</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityStarted</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>      activityStartCount<span class="token operator">++</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//数值从0变到1说明是从后台切到前台</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>activityStartCount <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//从后台切到前台</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>mOnAppStatusListener <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>          mOnAppStatusListener<span class="token punctuation">.</span><span class="token function">onFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityResumed</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityPaused</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityStopped</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>      activityStartCount<span class="token operator">--</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//数值从1到0说明是从前台切到后台</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>activityStartCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//从前台切到后台</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>mOnAppStatusListener <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>          mOnAppStatusListener<span class="token punctuation">.</span><span class="token function">onBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivitySaveInstanceState</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">,</span> Bundle outState<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onActivityDestroyed</span><span class="token punctuation">(</span>Activity activity<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OnAppStatusListener</span><span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">onFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">onBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="二、Application中使用（注意：仅在Application中才能使用，因为Application的生命周期能监听到每个Activity）"><a href="#二、Application中使用（注意：仅在Application中才能使用，因为Application的生命周期能监听到每个Activity）" class="headerlink" title="二、Application中使用（注意：仅在Application中才能使用，因为Application的生命周期能监听到每个Activity）"></a>二、Application中使用（注意：仅在Application中才能使用，因为Application的生命周期能监听到每个Activity）</h5><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        AppFrontBackHelper helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AppFrontBackHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>MyApp<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">AppFrontBackHelper<span class="token punctuation">.</span>OnAppStatusListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//应用切到前台处理</span>            <span class="token punctuation">}</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//应用切到后台处理</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里在后台我们就可以去做一些事情比如开始一个计时任务 超时时退出登录</p><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApp</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> Timer mTimer<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 计时器，每1秒执行一次任务</span>    <span class="token keyword">private</span> MyTimerTask mTimerTask<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 计时任务，判断是否未操作时间到达ns</span>    <span class="token keyword">private</span> <span class="token keyword">long</span> mLastActionTime<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 上一次操作时间</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        AppFrontBackHelper helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AppFrontBackHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        helper<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>MyApp<span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">AppFrontBackHelper<span class="token punctuation">.</span>OnAppStatusListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//应用切到前台处理</span>                Log<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"在前台"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                mLastActionTime <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>mTimer <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>                     mTimer<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token annotation punctuation">@Override</span>            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token comment" spellcheck="true">//应用切到后台处理</span>                Log<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"在后台"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>SharedPrefsHelper<span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                  <span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 登录成功，开始计时</span>  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">startTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>mTimer <span class="token operator">!=</span> null<span class="token punctuation">)</span><span class="token punctuation">{</span>      mTimer<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    mTimer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    mTimerTask <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyTimerTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 初始化上次操作时间为登录成功的时间</span>    mLastActionTime <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 每过1s检查一次</span>    mTimer<span class="token punctuation">.</span><span class="token function">schedule</span><span class="token punctuation">(</span>mTimerTask<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Log<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"开始计时了。。。。。。。。。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">MyTimerTask</span> <span class="token keyword">extends</span> <span class="token class-name">TimerTask</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      Log<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"计时中……"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 一小时未操作停止计时并退出登录</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mLastActionTime <span class="token operator">></span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">3600</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">stopTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 停止计时任务</span>        <span class="token function">LogOutAuto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//退出登录状态</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// 停止计时任务</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stopTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    mTimer<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 计时任务是否完成 赋值</span>    SharedPrefsHelper<span class="token punctuation">.</span><span class="token function">setBoolean</span><span class="token punctuation">(</span>Constants<span class="token punctuation">.</span>IS_TIMER_TASK_FINISHED<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 用户按下后退键 初始化值</span>    SharedPrefsHelper<span class="token punctuation">.</span><span class="token function">setBoolean</span><span class="token punctuation">(</span>Constants<span class="token punctuation">.</span>USER_PRESSED_BACK<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Log<span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span><span class="token string">"结束了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Log<span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">"TAG"</span><span class="token punctuation">,</span> <span class="token string">"取消计时"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android-RecycleView内部item点击事件</title>
      <link href="2020/10/21/android-recycleview-nei-bu-item-dian-ji-shi-jian/"/>
      <url>2020/10/21/android-recycleview-nei-bu-item-dian-ji-shi-jian/</url>
      
        <content type="html"><![CDATA[<h4 id="RecyclerView的使用——Item内部控件的点击事件"><a href="#RecyclerView的使用——Item内部控件的点击事件" class="headerlink" title="RecyclerView的使用——Item内部控件的点击事件"></a>RecyclerView的使用——Item内部控件的点击事件</h4><h5 id="一、在adapter中写item点击事件的接口供外部的activity使用"><a href="#一、在adapter中写item点击事件的接口供外部的activity使用" class="headerlink" title="一、在adapter中写item点击事件的接口供外部的activity使用"></a>一、在adapter中写item点击事件的接口供外部的activity使用</h5><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">/*** item内部的监听接口*/</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ItemInnerOnclickListener</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 这个String id 是点击item是想要传的参数</span>    <span class="token keyword">void</span> <span class="token function">onItemInnerOnClick</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">,</span> String id<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">private</span> ItemInnerOnclickListener mItemInnerOnclickListener<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setOnItemOnClickListener</span><span class="token punctuation">(</span>ItemInnerOnclickListener mItemInnerOnclickListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>mItemInnerOnclickListener <span class="token operator">=</span> mItemInnerOnclickListener<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在holder中就可以这么去写：(这里我使用了CommonAdapter 所以holder的代码可能不太一样)</p><pre class="line-numbers language-java"><code class="language-java">holder<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>cancel_withdraw<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OnMultiClickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token annotation punctuation">@Override</span>  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onMultiClick</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// record.id 是activity那边拿到数据后用bean来解析的 传递过来的数据</span>    <span class="token comment" spellcheck="true">// public class WithdrawRecordsAdapter extends CommonAdapter&lt;WithdrawRecordBean.Record></span>    mItemInnerOnclickListener<span class="token punctuation">.</span><span class="token function">onItemInnerOnClick</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> record<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="二、在activity中我们就可以这么去写"><a href="#二、在activity中我们就可以这么去写" class="headerlink" title="二、在activity中我们就可以这么去写"></a>二、在activity中我们就可以这么去写</h5><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">private</span> WithdrawRecordsAdapter withdrawRecordsAdapter<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-java"><code class="language-java">withdrawRecordsAdapter<span class="token punctuation">.</span><span class="token function">setOnItemOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">WithdrawRecordsAdapter<span class="token punctuation">.</span>ItemInnerOnclickListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token annotation punctuation">@Override</span>          <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onItemInnerOnClick</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">,</span> String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">showDialog</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里我们设置点击事件的时候去new了一个adapter中点击事件的接口，并且我们还可以拿到adapter中点击时想要传递的String id 去做一些事情</p>]]></content>
      
      
      <categories>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安卓开发 </tag>
            
            <tag> RecycleView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rust 闭包</title>
      <link href="2020/10/21/rust-bi-bao/"/>
      <url>2020/10/21/rust-bi-bao/</url>
      
        <content type="html"><![CDATA[<h4 id="快速掌握Rust闭包"><a href="#快速掌握Rust闭包" class="headerlink" title="快速掌握Rust闭包"></a>快速掌握Rust闭包</h4><p><em>闭包(Closure) : 也叫Lambda表达式或匿名函数。</em></p><p>不像普通函数，闭包可以对参数和返回类型进行推断，大多数时候都不需要写出来。以下定义都是合法的：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token operator">||</span> <span class="token number">42</span><span class="token punctuation">;</span><span class="token operator">|</span>x<span class="token operator">|</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">|</span>x<span class="token punctuation">:</span>i32<span class="token operator">|</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token closure-params"><span class="token punctuation">|</span>x<span class="token punctuation">:</span>i32<span class="token punctuation">|</span></span> <span class="token punctuation">-></span> i32 <span class="token punctuation">{</span> x <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在上面的例子中，如果是单行语句且没有标注返回类型的时候，花括号是可选的。</p><ul><li>闭包可以像任何其他对象一样绑定到某个变量,然后可以像调用函数一样调用闭包</li></ul><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token operator">|</span>x<span class="token operator">|</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x is {}"</span><span class="token punctuation">,</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>打印结果如下：</p><pre class="line-numbers language-rust"><code class="language-rust">x is <span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>也可以在定义的地方直接调用:</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">|</span>x<span class="token operator">|</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// r == 3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>闭包可以捕获外部的环境变量（自由变量）。</li></ul><p>闭包捕获变量的方式分为三类：引用（&amp;T）、可变引用（&amp;mut T）和值（T）。捕获变量时，闭包会根据上面列出的顺序（从约束最少到约束最多），优先按引用捕获，必要时才会使用后面的捕获方式：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 闭包按引用捕获变量x，因为println!只需要引用参数</span><span class="token keyword">let</span> show_x <span class="token operator">=</span> <span class="token operator">||</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"x = {}"</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">show_x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>外部变量的引用保存在show_x对象中，对外部变量的借用持续到show_x离开作用域为止。</p><p>下面是一个捕获可变引用的例子：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 闭包按可变引用捕获变量count </span><span class="token comment" spellcheck="true">// incr也必须是可变的，因为它持有可变引用，调用incr会改变闭包的状态</span><span class="token keyword">let</span> <span class="token keyword">mut</span> incr <span class="token operator">=</span> <span class="token closure-params"><span class="token punctuation">|</span><span class="token punctuation">|</span></span> <span class="token punctuation">{</span> count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"count = {}"</span><span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">incr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>下面的代码演示了闭包转移捕获变量所有权时的情况（捕获变量的值）：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">use</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>mem<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// b是不可复制类型，因此按值捕获时所有权会转移</span><span class="token keyword">let</span> b <span class="token operator">=</span> Box<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token closure-params"><span class="token punctuation">|</span><span class="token punctuation">|</span></span> <span class="token punctuation">{</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"b = {}"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// drop函数取T类型，因此闭包会按值捕获变量b</span>    mem<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">drop</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>调用闭包后b的所有权已经转移，无法再访问：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token comment" spellcheck="true">// 编译错误</span><span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"b = {}"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>同样，因为b的所有权已经转移，无法再次调用这个闭包：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token comment" spellcheck="true">// 编译错误</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果要强制按值捕获，可以在闭包前添加关键字move：</p><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token keyword">move</span> <span class="token closure-params"><span class="token punctuation">|</span><span class="token punctuation">|</span></span> <span class="token punctuation">{</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"b = {}"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>同样地，调用闭包后b的所有权已经转移，无法再访问。</p>]]></content>
      
      
      <categories>
          
          <category> Rust </category>
          
      </categories>
      
      
        <tags>
            
            <tag> closure </tag>
            
            <tag> 函数式编程 </tag>
            
            <tag> Rust 编程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA 破解</title>
      <link href="2020/10/21/idea-po-jie/"/>
      <url>2020/10/21/idea-po-jie/</url>
      
        <content type="html"><![CDATA[<h4 id="2020-09-024-亲测有效：IntelliJ-IDEA-2020-2-最新全家桶系列产品激活破解方法-JetBrains-全家桶激活"><a href="#2020-09-024-亲测有效：IntelliJ-IDEA-2020-2-最新全家桶系列产品激活破解方法-JetBrains-全家桶激活" class="headerlink" title="2020-09-024 亲测有效：IntelliJ IDEA 2020.2 最新全家桶系列产品激活破解方法, JetBrains 全家桶激活"></a>2020-09-024 亲测有效：IntelliJ IDEA 2020.2 最新全家桶系列产品激活破解方法, JetBrains 全家桶激活</h4><h5 id="激活方法"><a href="#激活方法" class="headerlink" title="激活方法"></a>激活方法</h5><h5 id="1、下载最新版的idea-正常安装"><a href="#1、下载最新版的idea-正常安装" class="headerlink" title="1、下载最新版的idea 正常安装"></a>1、下载最新版的idea 正常安装</h5><h5 id="2、选择免费试用30天"><a href="#2、选择免费试用30天" class="headerlink" title="2、选择免费试用30天"></a>2、选择免费试用30天</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201021130024.png"></p><h5 id="3、进入到idea中后-将压缩包拖进idea-并重启"><a href="#3、进入到idea中后-将压缩包拖进idea-并重启" class="headerlink" title="3、进入到idea中后 将压缩包拖进idea 并重启"></a>3、进入到idea中后 将压缩包拖进idea 并重启</h5><p><strong>[<a href="https://justcode.ikeepstudying.com/wp-content/uploads/2020/09/jetbrains-agent.zip">jetbrains-agent.zip 下载地址</a>]</strong></p><h5 id="4、输入安装参数"><a href="#4、输入安装参数" class="headerlink" title="4、输入安装参数"></a>4、输入安装参数</h5><pre><code>LFq51qqupnaiTNn39w6zATiOTxZI2JYuRJEBlzmUDv4zeeNlXhMgJZVb0q5QkLr+CIUrSuNB7ucifrGXawLB4qswPOXYG7+ItDNUR/9UkLTUWlnHLX07hnR1USOrWIjTmbytcIKEdaI6x0RskyotuItj84xxoSBP/iRBW2EHpOc</code></pre><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201021130345.png"></p><h5 id="5、会询问你是否重启，重启就完事了"><a href="#5、会询问你是否重启，重启就完事了" class="headerlink" title="5、会询问你是否重启，重启就完事了"></a>5、会询问你是否重启，重启就完事了</h5><h2 id="下面是原文地址"><a href="#下面是原文地址" class="headerlink" title="下面是原文地址"></a>下面是原文地址</h2><p><strong>[<a href="https://justcode.ikeepstudying.com/2020/09/2020-09-09-%e4%ba%b2%e6%b5%8b%e6%9c%89%e6%95%88%ef%bc%9aintellij-idea-2020-2-%e6%9c%80%e6%96%b0%e5%85%a8%e5%ae%b6%e6%a1%b6%e7%b3%bb%e5%88%97%e4%ba%a7%e5%93%81%e6%bf%80%e6%b4%bb%e7%a0%b4%e8%a7%a3/">原文地址</a>]</strong></p>]]></content>
      
      
      <categories>
          
          <category> IDEA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rust 琐碎知识记录板</title>
      <link href="2020/10/21/rust-suo-sui-zhi-shi-ji-lu-ban/"/>
      <url>2020/10/21/rust-suo-sui-zhi-shi-ji-lu-ban/</url>
      
        <content type="html"><![CDATA[<h3 id="下面是Rust的一些琐碎知识"><a href="#下面是Rust的一些琐碎知识" class="headerlink" title="下面是Rust的一些琐碎知识"></a>下面是Rust的一些琐碎知识</h3><h5 id="1、format-宏"><a href="#1、format-宏" class="headerlink" title="1、format!宏"></a>1、format!宏</h5><ul><li>format!: write formatted text to String  这个宏可以将一个文本格式化成String类型（可变字符串，在堆上面分配空间），类似于C#中的String.Format方法。</li></ul><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> world <span class="token operator">=</span> <span class="token string">"world"</span><span class="token punctuation">;</span><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token function">format!</span><span class="token punctuation">(</span><span class="token string">"Hello {}!"</span><span class="token punctuation">,</span> world<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样text的类型就会是String</p>]]></content>
      
      
      <categories>
          
          <category> Rust </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常用命令</title>
      <link href="2020/10/21/chang-yong-ming-ling/"/>
      <url>2020/10/21/chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h3 id="下面总结一下常用的命令"><a href="#下面总结一下常用的命令" class="headerlink" title="下面总结一下常用的命令"></a>下面总结一下常用的命令</h3><ul><li>1、Mac系统查看端口占用和杀死进程</li></ul><pre><code>lsof -i tcp:8080</code></pre><p>该命令会显示8080端口的占用情况，有pid，可以根据pid关掉该进程</p><pre><code>kill -9 pid号</code></pre><ul><li>2、</li></ul>]]></content>
      
      
      <categories>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 常用命令 </tag>
            
            <tag> Linux </tag>
            
            <tag> MacOs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>什么是运行时(Runtime)</title>
      <link href="2020/10/20/shi-me-shi-yun-xing-shi-runtime/"/>
      <url>2020/10/20/shi-me-shi-yun-xing-shi-runtime/</url>
      
        <content type="html"><![CDATA[<h3 id="什么是运行时（Runtime）"><a href="#什么是运行时（Runtime）" class="headerlink" title="什么是运行时（Runtime）"></a>什么是运行时（Runtime）</h3><p>任何语言要运行都需要自己的运行时，Java 程序的运行时叫 Java Runtime，Android 程序的运行时叫 Android Runtime，而具体 Runtime 是个什么东西呢，<br>就是说一个程序要在一个硬件或者平台上跑，就必须要有一个中间层用来把程序语言转换为机器能听懂的机器语言。</p><p>Java Runtime 的左右就是如此，如我们编写好了 Java 的 Hello World 程序.</p><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span><span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span>  <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>代码我们认识，作用就是输出一个 “hello world”，但是要在一个冷冰冰的机器上，让机器能读懂并运行这段代码，就需要一个 Java 语言的运行时环境，只有这个环境才能读懂它，并能让代码更机器进行打交道。</p><p>到这里我们已经明白，<strong>如果一个电脑要能运行 Java 程序就必须安装有 Java Runtime</strong>。对于其他语言也是如此，要在平台上运行就必须要有对应平台上的 Runtime 组件，这也是开发一个新语言必须要做的事。</p><p>说道 Runtime，在 Java 发展的过程中，Java 一下子火了有一个很重要原因，就是在 90 年代，微软的 IE 浏览器为了打败网景浏览器，曾经就在 IE 中默认安装 Java 运行时，再加上 IE 浏览器内置在 Windows 操作系统中，使得 IE 装机量特别大，同样这对 Java 也是一个非常大的促进作用。由于 IE 内置 Java Runtime，使得在 IE 浏览器中开发 Java 程序变得更加简单。如出名的 Java Applet（Java 小程序）开发。</p><p>后来因为 Sun 跟 微软之间诉讼等事情，这个合作也没多久，现在 IE 已经默认禁用了 Java Applet。</p><p>说道 <strong>Java Runtime（简称 JRE）</strong> ，曾经在一开始开发 Java 程序时，经常把 JRE 跟 JDK 搞混。</p><p>JRE 是一个独立的东西，就是 Java 程序的运行环境，其中包含一个 JAVA 虚拟机（JVM）以及一些标准的函数类库。</p><p>而 JDK 是 Sun 公司专门给开发人员准备的 Java 开发工具集。它其中就包含了 JRE，所以配置好 JDK，自然就可以在电脑上运行 Java 程序了。除此之外，JDK 还包含了源码、API 文档、编译工具等等。</p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Runtime </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rust 0u8在rust中是什么意思</title>
      <link href="2020/10/19/rust-0u8-zai-rust-zhong-shi-shi-me-yi-si/"/>
      <url>2020/10/19/rust-0u8-zai-rust-zhong-shi-shi-me-yi-si/</url>
      
        <content type="html"><![CDATA[<h4 id="rust-0u8在rust中是什么意思"><a href="#rust-0u8在rust中是什么意思" class="headerlink" title="rust 0u8在rust中是什么意思"></a>rust 0u8在rust中是什么意思</h4><h6 id="当我在学习Rust-编程语言"><a href="#当我在学习Rust-编程语言" class="headerlink" title="当我在学习Rust 编程语言"></a>当我在学习<a href="https://learnku.com/docs/rust-lang/2018/ch06-03-if-let/4515">Rust 编程语言</a></h6><ul><li>遇到了如下这种问题：  <pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> some_u8_value <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">0u8</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">match</span> some_u8_value <span class="token punctuation">{</span>  <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"three"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  _ <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>0u8 是什么意思，在我的印象中应该是这么写    <pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">let</span> some_u8_value <span class="token operator">=</span> <span class="token function">Some</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token punctuation">:</span>u8<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>然而并没有这种写法，直到我在 <a href="https://rustwiki.org/zh-CN/rust-by-example/types/literals.html">rust_by_example</a> 中看到了答案，</li></ul><h3 id="字面量"><a href="#字面量" class="headerlink" title="字面量"></a>字面量</h3><ul><li><p>对数值字面量，只要把类型作为后缀加上去，就完成了类型说明。比如指定字面量 42 的 类型是 i32，只需要写 42i32。</p></li><li><p>无后缀的数值字面量，其类型取决于怎样使用它们。如果没有限制，编译器会对整数使用 i32，对浮点数使用 f64。</p></li></ul><pre class="line-numbers language-rust"><code class="language-rust"><span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// 带后缀的字面量，其类型在初始化时已经知道了。</span>    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1u8</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">2u32</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token number">3f32</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 无后缀的字面量，其类型取决于如何使用它们。</span>    <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// `size_of_val` 返回一个变量所占的字节数</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"size of `x` in bytes: {}"</span><span class="token punctuation">,</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>mem<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"size of `y` in bytes: {}"</span><span class="token punctuation">,</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>mem<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"size of `z` in bytes: {}"</span><span class="token punctuation">,</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>mem<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"size of `i` in bytes: {}"</span><span class="token punctuation">,</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>mem<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">println!</span><span class="token punctuation">(</span><span class="token string">"size of `f` in bytes: {}"</span><span class="token punctuation">,</span> std<span class="token punctuation">:</span><span class="token punctuation">:</span>mem<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Rust </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rust </tag>
            
            <tag> 0u8 </tag>
            
            <tag> 字面量 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>picture_bed</title>
      <link href="2020/10/18/picture-bed/"/>
      <url>2020/10/18/picture-bed/</url>
      
        <content type="html"><![CDATA[<h3 id="Mac环境–如何做一个自用的图床"><a href="#Mac环境–如何做一个自用的图床" class="headerlink" title="Mac环境–如何做一个自用的图床"></a>Mac环境–如何做一个自用的图床</h3><h4 id="1、下载PicGo"><a href="#1、下载PicGo" class="headerlink" title="1、下载PicGo"></a>1、下载PicGo</h4><p>PicGo<a href="https://github.com/Molunerfinn/picgo/releases">下载地址</a></p><h4 id="2、创建一个Github仓库并进行设置"><a href="#2、创建一个Github仓库并进行设置" class="headerlink" title="2、创建一个Github仓库并进行设置"></a>2、创建一个Github仓库并进行设置</h4><h5 id="（1）创建仓库"><a href="#（1）创建仓库" class="headerlink" title="（1）创建仓库"></a>（1）创建仓库</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018155437.png"></p><h5 id="2-点击头像-点击Settings"><a href="#2-点击头像-点击Settings" class="headerlink" title="(2) 点击头像 点击Settings"></a>(2) 点击头像 点击Settings</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018160141.png"></p><h5 id="3-再点-Developer-settings"><a href="#3-再点-Developer-settings" class="headerlink" title="(3) 再点 Developer settings"></a>(3) 再点 Developer settings</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018160243.png"></p><h5 id="4-再点-Personal-access-tokens"><a href="#4-再点-Personal-access-tokens" class="headerlink" title="(4) 再点 Personal access tokens"></a>(4) 再点 Personal access tokens</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018160353.png"></p><h5 id="5-填写内容"><a href="#5-填写内容" class="headerlink" title="(5) 填写内容"></a>(5) 填写内容</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018160722.png"></p><h5 id="6-复制生成的token-注意：网页关闭后就再也看不到这个token了"><a href="#6-复制生成的token-注意：网页关闭后就再也看不到这个token了" class="headerlink" title="(6) 复制生成的token (注意：网页关闭后就再也看不到这个token了)"></a>(6) 复制生成的token (注意：网页关闭后就再也看不到这个token了)</h5><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018161000.png"></p><h4 id="3、在刚才创建的仓库中新增一个项目"><a href="#3、在刚才创建的仓库中新增一个项目" class="headerlink" title="3、在刚才创建的仓库中新增一个项目"></a>3、在刚才创建的仓库中新增一个项目</h4><pre><code>git initgit add .git commit -m "备注"git remote add origin 仓库地址git push -u origin master</code></pre><p>下面是我的项目：<br><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018162357.png"></p><h4 id="4、配置刚才下载的PicGo"><a href="#4、配置刚才下载的PicGo" class="headerlink" title="4、配置刚才下载的PicGo"></a>4、配置刚才下载的PicGo</h4><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018161711.png"></p><p>设置自定义域名：<br>    <a href="https://cdn.jsdelivr.net/gh/Naruto-1996/picture">https://cdn.jsdelivr.net/gh/Naruto-1996/picture</a><br>    <a href="https://cdn.jsdelivr.net/gh/%E7%94%A8%E6%88%B7%E5%90%8D/%E4%BB%93%E5%BA%93%E5%90%8D">https://cdn.jsdelivr.net/gh/用户名/仓库名</a></p><p>配置完就可以在PicGo中上传图片了。</p>]]></content>
      
      
      <categories>
          
          <category> 图床 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> jsDelivr </tag>
            
            <tag> PicGo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+github搭建一个博客</title>
      <link href="2020/10/16/hexo-github-da-jian-yi-ge-bo-ke/"/>
      <url>2020/10/16/hexo-github-da-jian-yi-ge-bo-ke/</url>
      
        <content type="html"><![CDATA[<h3 id="使用Hexo-Github-搭建一个博客网站-Mac环境"><a href="#使用Hexo-Github-搭建一个博客网站-Mac环境" class="headerlink" title="使用Hexo + Github 搭建一个博客网站 [Mac环境]"></a>使用Hexo + Github 搭建一个博客网站 [Mac环境]</h3><h4 id="1、创建Github仓库"><a href="#1、创建Github仓库" class="headerlink" title="1、创建Github仓库"></a>1、创建Github仓库</h4><p><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018163610.png"></p><ul><li>注意Repository name 中一定要输入：你的用户名.github.io其他地方不用修改，然后直接点 ”Create repository“ 按钮完成创建即可<h4 id="2、安装博客需要的框架"><a href="#2、安装博客需要的框架" class="headerlink" title="2、安装博客需要的框架"></a>2、安装博客需要的框架</h4></li></ul><pre><code>安装 Homebrew$ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"查询Homebrew是否安装成功的命令$ brew -v安装 git$ brew install git查询git是否安装成功的命令$ git --version安装 node.js$ brew install node查询node是否安装成功的命令$ node -v安装 hexo$ npm install -g hexo查询hexo是否安装成功的命令$ hexo -v</code></pre><h4 id="3、安装博客相关的插件"><a href="#3、安装博客相关的插件" class="headerlink" title="3、安装博客相关的插件"></a>3、安装博客相关的插件</h4><pre><code>自动部署到Github上的插件  $ npm install hexo-deployer-git --save安装博客首页生成插件  $ npm install hexo-generator-index --save安装tag生成插件  $ npm install hexo-generator-tag --save* 到此为止，安装完毕</code></pre><h4 id="4、创建博客、调试、发布"><a href="#4、创建博客、调试、发布" class="headerlink" title="4、创建博客、调试、发布"></a>4、创建博客、调试、发布</h4><ul><li><p>创建本地一个目录，用来创建博客<br>  <code>$ hexo init Blog</code><br>执行成功后会在本地创建一个Blog的文件夹</p></li><li><p>cd 到Blog中<br>  <code>$ hexo new firstBlog</code><br>在Blog/source/_posts中就会新建一个firstBlog.md的文件，然后你就可以编辑你的博客内容了，Visual Studio Code编辑器支持预览，还可以和印象笔记同步</p></li><li><p>本地调试<br>  <code>$ sudo hexo server 或 $ sudo hexo s</code><br>然后可以访问<a href="http://localhost:4000来查看结果">http://localhost:4000来查看结果</a>  </p></li><li><p>安装发布插件<br>在博客文件夹运行下面命令<br><code>$ npm install hexo-deployer-git --save</code><br>然后在Blog文件夹下的_config.yml文件修改发布的配置，最后一行改为（注意替换yourusername）  </p></li></ul><pre><code># Site title: "李文洋"             subtitle: 'Android开发、Ruby程序员、目前正在学习Rust' description: '单身可撩、帅气的程序员小哥哥' keywords:                  author: 李文洋language: zh-CN            timezone: ''deploy:  type: git  #使用Git 发布  repo: https://github.com/Naruto-1996/Naruto-1996.github.io.git  #自己的Github仓库地址  branch: master</code></pre><ul><li>运行生成发布</li></ul><pre><code>$ sudo hexo g$ sudo hexo d</code></pre><p>如果改动了站点的源码，需要在发布之前  </p><p><code>$ sudo hexo clean</code>  </p><p>如果成功了就可以通过yourusername.github.io来访问你的博客了</p><h4 id="5、新建分类页面"><a href="#5、新建分类页面" class="headerlink" title="5、新建分类页面"></a>5、新建分类页面</h4><p>categories 页是用来展示所有分类的页面，如果在你的博客 source 目录下还没有 categories/index.md 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "categories"</code></pre><p>编辑你刚刚新建的页面文件 /source/categories/index.md，至少需要以下内容：</p><pre><code>---title: categoriesdate: 2018-09-30 17:25:30type: "categories"layout: "categories"---</code></pre><h4 id="6、新建标签页面-tags"><a href="#6、新建标签页面-tags" class="headerlink" title="6、新建标签页面 tags"></a>6、新建标签页面 tags</h4><p>tags 页是用来展示所有标签的页面，如果在你的博客 source 目录下还没有 tags/index.md 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "tags"</code></pre><p>编辑你刚刚新建的页面文件 /source/tags/index.md，至少需要以下内容：</p><pre><code>---title: tagsdate: 2018-09-30 17:25:30type: "tags"layout: "tags"---</code></pre><h4 id="7、新建关于我-about-页面"><a href="#7、新建关于我-about-页面" class="headerlink" title="7、新建关于我 about 页面"></a>7、新建关于我 about 页面</h4><p>about 页是用来展示关于我和我的博客信息的，如果在你的博客 source 目录下还没有 about/index.md 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "about"</code></pre><p>编辑你刚刚新建的页面文件 /source/about/index.md，至少需要以下内容：</p><pre><code>---title: aboutdate: 2018-09-30 17:25:30type: "about"layout: "about"---</code></pre><h4 id="8、新建留言板-contact-页（可选的）"><a href="#8、新建留言板-contact-页（可选的）" class="headerlink" title="8、新建留言板 contact 页（可选的）"></a>8、新建留言板 contact 页（可选的）</h4><p>contact 页是用来展示留言板信息的，如果在你的博客 source 目录下还没有 contact/index.md 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "contact"</code></pre><p>编辑你刚刚新建的页面文件 /source/contact/index.md，至少需要以下内容：</p><pre><code>---title: contactdate: 2018-09-30 17:25:30type: "contact"layout: "contact"---</code></pre><ul><li>注：本留言板功能依赖于第三方评论系统，请激活你的评论系统才有效果。并且在主题的 _config.yml 文件中，第 19至 21 行的“菜单”配置，取消关于留言板的注释即可。</li></ul><h4 id="9、新建友情链接页面-friends"><a href="#9、新建友情链接页面-friends" class="headerlink" title="9、新建友情链接页面 friends"></a>9、新建友情链接页面 friends</h4><p>friends 页是用来展示好友的，如果在你的博客 source 目录下还没有 friends/index.md 文件，那么你就需要新建一个，命令如下：</p><pre><code>hexo new page "friends"</code></pre><p>编辑你刚刚新建的页面文件 /source/friends/index.md，至少需要以下内容：</p><pre><code>---title: friendsdate: 2018-09-30 17:25:30type: "friends"layout: "friends"---</code></pre><p>同时，在你的博客 source 目录下新建 _data 目录，在 _data 目录中新建 friends.json 文件，文件内容如下所示：</p><pre><code>[{    "avatar": "http://image.luokangyuan.com/1_qq_27922023.jpg",    "name": "码酱",    "introduction": "我不是大佬，只是在追寻大佬的脚步",    "url": "http://luokangyuan.com/",    "title": "前去学习"}, {    "avatar": "http://image.luokangyuan.com/4027734.jpeg",    "name": "闪烁之狐",    "introduction": "编程界大佬，技术牛，人还特别好，不懂的都可以请教大佬",    "url": "https://blinkfox.github.io/",    "title": "前去学习"}, {    "avatar": "http://image.luokangyuan.com/avatar.jpg",    "name": "ja_rome",    "introduction": "平凡的脚步也可以走出伟大的行程",    "url": "https://me.csdn.net/jlh912008548",    "title": "前去学习"}]</code></pre><h4 id="10、接下来就是如何写博客了"><a href="#10、接下来就是如何写博客了" class="headerlink" title="10、接下来就是如何写博客了"></a>10、接下来就是如何写博客了</h4><p><code>sudo hexo new "第一个博客" </code></p><p>就会在Blog文件夹中的 source/_posts 文件夹下创建出一个 第一个博客.md 文件</p><pre><code>---title: 第一个博客date: 2020-10-16 18:57:25categories:- Mactags:- hexo- github---</code></pre><ul><li>注意这里的 categories 和 tag 标签 就是对文章的分类和标签 写了这些就会在前端展示出来<br><img src="https://cdn.jsdelivr.net/gh/Naruto-1996/picture/images/20201018172533.png"></li></ul><p>然后就可以运行一下命令来生成和发布文章到github上了  </p><pre><code>sudo hexo gsudo hexo d</code></pre><h4 id="11、关于主题的配置我这里就不在说了可以自行Google一下-hexo主题配置"><a href="#11、关于主题的配置我这里就不在说了可以自行Google一下-hexo主题配置" class="headerlink" title="11、关于主题的配置我这里就不在说了可以自行Google一下 hexo主题配置"></a>11、关于主题的配置我这里就不在说了可以自行Google一下 hexo主题配置</h4><p>留个传送门供我自己使用<br><a href="https://hexo.io/themes/">主题传送门</a></p>]]></content>
      
      
      <categories>
          
          <category> Mac </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="2020/10/16/hello-world/"/>
      <url>2020/10/16/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> web前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> jQuery </tag>
            
            <tag> 表格 </tag>
            
            <tag> 表单验证 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
